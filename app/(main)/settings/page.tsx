"use client"

import { useEffect, useState, useRef } from "react"
import { useTheme } from "next-themes"
import { Switch } from "@/components/ui/switch"
import { Label } from "@/components/ui/label"
import { Input } from "@/components/ui/input"
import { Button } from "@/components/ui/button"
import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"
import { cn } from "@/lib/utils"
import {
  Card, CardContent, CardDescription, CardHeader, CardTitle, CardFooter,
} from "@/components/ui/card"
import {
  Select, SelectContent, SelectItem, SelectTrigger, SelectValue,
} from "@/components/ui/select"
import {
  Dialog,
  DialogContent,
  DialogHeader,
  DialogTitle,
} from "@/components/ui/dialog"
import { 
  Moon, Sun, Save, Settings2, Sliders, Palette, Lock, 
  PenTool, Eraser, Upload, Trash2, Loader2, ShieldCheck, 
  Plus, Target, Footprints, X, AlertTriangle, CalendarDays, Clock, Copy, Scale // ๐ ุฃุถู CalendarDays, Clock, Copy
} from "lucide-react"
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogHeader,
  AlertDialogTitle,
} from "@/components/ui/alert-dialog"
import { toast } from "sonner"
import SignatureCanvas from 'react-signature-canvas'
import ProtectedRoute from "@/components/ProtectedRoute"
import { Badge } from "@/components/ui/badge"

// ุชุนุฑูู ุฃููุงุน ุงูุจูุงูุงุช
type Criterion = { id: string; name: string; max: number };
type MilitaryTest = { id: string; name: string; criteria: Criterion[] };
type MilitaryBranch = { id: 'shooting' | 'infantry'; name: string; tests: MilitaryTest[] };
// ๐ ุฃููุงุน ุจูุงูุงุช ุงูุงุดุชุจุงู
type EngagementCriterion = { 
  id: string; 
  name: string; 
  max: number; 
  stations: string[] // ๐ ุชุฃูุฏ ุฃููุง ูุตูููุฉ ููุง
};
type EngagementAxis = { 
  id: string; 
  name: string; 
  is_active: boolean; // ๐ ุงูุฅุถุงูุฉ ุงูุฌุฏูุฏุฉ
  criteria: EngagementCriterion[] 
};
type EngagementTab = { id: 'technical' | 'scenario'; name: string; axes: EngagementAxis[] };
type TrainingSession = {
  id: string;
  name: string;
  // ๐ข ุฃุถููุง 'combat' ููุง ููุฎุชูู ุงูุฎุทุฃ
  type: 'sports' | 'military' | 'combat' | 'lecture' | 'other'; 
  startTime: string;
  endTime: string;
};

type DaySchedule = {
  dayName: string;   // "ุงูุฃุญุฏ"ุ "ุงูุงุซููู"...
  sessions: TrainingSession[]; // ูุงุฆูุฉ ุญุตุต ูุฐุง ุงูููู
};

type TrainingTemplate = {
  id: string;
  name: string;          // "ุงูุฌุฏูู ุงูุดุชูู - ูุณุชุฌุฏูู"
  courseId: string;      // ุงูุฏูุฑุฉ ุงููุฑุชุจุทุฉ (ุงุฎุชูุงุฑู)
  batchId: string;       // ุงูุฏูุนุฉ ุงููุฑุชุจุทุฉ (ุงุฎุชูุงุฑู)
  isActive: boolean;     // ูู ูู ุงูุฌุฏูู ุงููุนุงูุ
  schedule: DaySchedule[]; // ูุตูููุฉ ุงูู 7 ุฃูุงู
};
// โ๏ธ ุฃููุงุน ุจูุงูุงุช ูุงุฆุญุฉ ุงููุฎุงููุงุช
type Violation = { id: string; name: string; penalty: string; deduction: number };
type ViolationDegree = { id: string; name: string; items: Violation[] };
type DisciplinaryRegulation = { id: string; name: string; degrees: ViolationDegree[] };
// ุฏุงูุฉ ูุชุญููู ุงูุฃุฑูุงู ูู ุงูุนุฑุจูุฉ ุงูุดุฑููุฉ ุฅูู ุงูุฅูุฌููุฒูุฉ
const toEnglishDigits = (str: string) => {
  return str.replace(/[ู-ูฉ]/g, (d) => "ููกูขูฃูคูฅูฆูงูจูฉ".indexOf(d).toString());
};
export default function SettingsPage() {
  const { theme, setTheme } = useTheme()
  const [mounted, setMounted] = useState(false)
  const [userRole, setUserRole] = useState<string | null>(null)
  const sigPad = useRef<any>({})
  const [isDeleteDialogOpen, setIsDeleteDialogOpen] = useState(false);
const [testToDelete, setTestToDelete] = useState<{branchId: string, testId: string} | null>(null);
const [filterOptions, setFilterOptions] = useState<{ courses: string[], batches: string[] }>({ courses: [], batches: [] });
  // ุญุงูุงุช ูููุฉ ุงููุฑูุฑ
  const [currentPassword, setCurrentPassword] = useState("");
  const [newPassword, setNewPassword] = useState("");
  const [confirmPassword, setConfirmPassword] = useState("");
  const [isUpdatingPassword, setIsUpdatingPassword] = useState(false);
  const [trainingTemplates, setTrainingTemplates] = useState<TrainingTemplate[]>([]);
  const [activeTemplateId, setActiveTemplateId] = useState<string | null>(null);
  const [isEditingTemplate, setIsEditingTemplate] = useState(false); // ูุถุน ุงูุชุนุฏูู

  // ุฃูุงู ุงูุฃุณุจูุน ุงูุซุงุจุชุฉ ููุฌุฏูู
  const weekDays = ["ุงูุฃุญุฏ", "ุงูุงุซููู", "ุงูุซูุงุซุงุก", "ุงูุฃุฑุจุนุงุก", "ุงูุฎููุณ"];
  // ุญุงูุงุช ุงูุชูููุน
  const [savedSignature, setSavedSignature] = useState<string | null>(null)
  const [userMilId, setUserMilId] = useState<string | null>(null)
  const [editingAxis, setEditingAxis] = useState<{tabId: string, axisId: string, name: string} | null>(null);
const [isAxisModalOpen, setIsAxisModalOpen] = useState(false);
  // ุฅุนุฏุงุฏุงุช ุงูููุงูุฉ ูุงูุชูุถููุงุช
  const [calcSettings, setCalcSettings] = useState({
    distance: "3200", pass_rate: 60, base_score: 100, mercy_mode: false, rows_per_page: "10"
  })
  const saveDisciplinaryData = async () => {
    setLoading(true);

    // 1. ุชุญููู ุงูุจูุงูุงุช ุงููุชุฏุงุฎูุฉ ุฅูู ูุงุฆูุฉ ูุณุทุญุฉ ุชูุงุณุจ ูุงุนุฏุฉ ุงูุจูุงูุงุช
    const flattenedRegulations: any[] = [];

    disciplinaryData.forEach(reg => {
        reg.degrees.forEach(degree => {
            // ุงุณุชุฎุฑุงุฌ ุฑูู ุงูุฏุฑุฌุฉ ูู ุงููุนุฑู (ูุซูุงู d1 ุชุตุจุญ 1)
            const degreeNumber = parseInt(degree.id.replace(/[^\d]/g, '')) || 1;
            
            degree.items.forEach(item => {
                flattenedRegulations.push({
                    regulation_type: reg.id, // 'recruits' ุฃู 'specialized'
                    degree: degreeNumber,
                    violation_name: item.name,
                    penalty_label: item.penalty,
                    deduction_points: item.deduction,
                    is_active: true
                });
            });
        });
    });

    // 2. ุฅุฑุณุงู ุงูุจูุงูุงุช ููุจุงู ุฅูุฏ
    try {
        const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/settings/disciplinary/bulk`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
                "Authorization": `Bearer ${localStorage.getItem("token")}`
            },
            body: JSON.stringify({ regulations: flattenedRegulations })
        });

        if (res.ok) {
            toast.success("ุชู ุงุนุชูุงุฏ ูุญูุธ ูุงูุฉ ุงูููุงุฆุญ ุจูุฌุงุญ โ");
        } else {
            const err = await res.json();
            throw new Error(err.detail || "ูุดู ุงูุญูุธ");
        }
    } catch (e: any) {
        toast.error(`ุฎุทุฃ: ${e.message}`);
    } finally {
        setLoading(false);
    }
};
// ุญุงูุฉ ููุชุญูู ูู ูุงูุฐุฉ ุนุฑุถ/ุชุนุฏูู ูุต ุงููุฎุงููุฉ ุงูุทููู
const [editingViolationText, setEditingViolationText] = useState<{regId: string, degId: string, itemIdx: number, value: string} | null>(null);
  // ๐ก๏ธ ูุนุงููุฑ ุงูุนุณูุฑู (ุฑูุงูุฉ ููุดุงุฉ)
  const [militaryData, setMilitaryData] = useState<MilitaryBranch[]>([
    { id: 'shooting', name: 'ุงุฎุชุจุงุฑุงุช ุงูุฑูุงูุฉ', tests: [] },
    { id: 'infantry', name: 'ุงุฎุชุจุงุฑุงุช ุงููุดุงุฉ', tests: [] }
  ]);
// ๐ ุจูุงูุงุช ุงูุงุดุชุจุงู (ููู ูุณููุงุฑูู)
const [engagementData, setEngagementData] = useState<EngagementTab[]>([
  { 
    id: 'technical', 
    name: 'ุงูุงุฎุชุจุงุฑ ุงูููู', 
    axes: [
      {
        id: 'initial-axis',
        name: 'ูุญูุฑ ุฌุฏูุฏ',
        is_active: true, // ๐ข ุฃุถู ูุฐุง ุงูุณุทุฑ ููุง
        criteria: [
          { id: 'initial-crit', name: 'ูุนูุงุฑ 1', max: 0, stations: [] }
        ]
      }
    ] 
  },
  { id: 'scenario', name: 'ุงุฎุชุจุงุฑ ุงูุณููุงุฑูู', axes: [] }
]);
// ุญุงูุฉ ููุชุจุฏูู ุจูู ุงููุจูุช ูุงูุซุงุจุช ูู ูุงุฆุญุฉ ุงููุณุชุฌุฏูู
const [recruitSystem, setRecruitSystem] = useState<'sleeping' | 'fixed'>('sleeping');
const [activeEngTab, setActiveEngTab] = useState("technical");
  const [activeMilTab, setActiveMilTab] = useState("shooting");
  const [loading, setLoading] = useState(false)
// โ๏ธ ุญุงูุฉ ูุงุฆุญุฉ ุงููุฎุงููุงุช
const [disciplinaryData, setDisciplinaryData] = useState<DisciplinaryRegulation[]>([
  {
    id: 'recruits',
    name: 'ูุงุฆุญุฉ ุงููุณุชุฌุฏูู ูุงูุทูุจุฉ',
    degrees: [
      {
        id: 'd1',
        name: 'ูุฎุงููุงุช ุงูุฏุฑุฌุฉ ุงูุฃููู (ูุธุงู ุงููุจูุช)',
        items: [
          { id: 'r1-1', name: 'ุงูุบุด ูู ุงูุงูุชุญุงู ุ ุฃู ูุญุงููุฉ ุงูุบุด ุ ุฃู ูุณุงุนุฏุฉ ุทุงูุจ ุขุฎุฑ ุนูู ุงูุบุด', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-2', name: 'ุงูุญุตูู ุนูู ุงุณุฆูุฉ ุงูุงูุชุญุงูุงุช ุจุทุฑููุฉ ุบูุฑ ุฑุณููุฉ ุ ุงู ูุดุฑูุง ุ ุงู ุชูุฒูุนูุง ุงู ุงููุณุงุนุฏุฉ ูู ุฐูู ุงู ุงูุงุญุชูุงุธ ุจูุฑูุฉ ุงูุฅุฌุงุจุฉ ุจุนุฏ ุงูุชูุงุก ููุนุฏ ุงูุงูุชุญุงู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-3', name: 'ุงูููุงู ุจุฅุนุฏุงุฏ ุจุญูุซ ุงู ุฃูุฑุงู ุนูู ุนู ุทุงูุจ ุงุฎุฑ', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-4', name: 'ุชูุฏูู ุจุญูุซ ุงู ุฃูุฑุงู ุนูู ุงูุฃุณุชุงุฐ ุงูููุฑุฑ ููุณุช ูู ูุฌููุฏ ุงูุทุงูุจ ุฐุงุชู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-5', name: 'ุงูุฅุฎูุงู ุจุงููุธุงู ูุงูุชุนูููุงุช ุฏุงุฎู ูุงุนุฉ ุงูุงูุชุญุงู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-6', name: 'ุฑูุถ ุงูุฃูุงูุฑ ุงู ุงูุชุนูููุงุช ุงู ุงูุชุญุฑูุถ ุนูู ุฐูู ุงู ููุน ุงูุฒููุงุก ูู ุชูููุฐูุง ุจุฃู ูุณููุฉ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-7', name: 'ุงูุงุดุชุฑุงู ูู ุดุฌุงุฑ ุฌูุงุนู ุงู ุงูุชุญุฑูุถ ุนููู ุฏุงุฎู ุงููุนูุฏ ุงู ุฎุงุฑุฌู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-8', name: 'ุงูุงุนุชุฏุงุก ุจุงููุนู ุงู ุจุงูููู ุงู ุจุงููุชุงุจุฉ ุงู ุจุงู ูุณููุฉ ูู ูุณุงุฆู ุงูุชุนุจูุฑ ุงูุฃุฎุฑู ุนูู ุฃู ูู ุงูุนุงูููู ูู ุงููุนูุฏ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-9', name: 'ุงููุฑุงุฑ ูู ุงููุนูุฏ ุงู ุงููุฑูุจ ูู ุงูุญุฌุฒ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-10', name: 'ุชุนุงุทู ุงู ุญูุงุฒุฉ ุงูุนูุงููุฑ ุงูููููุนุฉ ุงู ุงููุดุฑูุจุงุช ุงููุญูููุฉ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-11', name: 'ุงูุฃูุนุงู ุงูุชู ุชุดูู ุงุญุฏู ุงูุฌุฑุงุฆู ุงูููุตูุต ุนูููุง ูู ุงูููุงููู ุงูุฌูุงุฆูุฉ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-12', name: 'ุชุญุฑูุถ ุงูุฒููุงุก ุงู ููุนูู ูู ุงูุฌููุณ ูุฃุฏุงุก ุงูุงูุชุญุงูุงุช ุงู ุญุถูุฑ ุงููุญุงุถุฑุงุช', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-13', name: 'ูุดุงูุฏุฉ ุงูุฃููุงู ุงู ุงูุตูุฑ ุงูุฅุจุงุญูุฉ ูุบูุฑูุง ุนุจุฑ ุงููุณุงุฆุท ุงูุฅููุชุฑูููุฉ ุงู ุญูุงุฒุชูุง', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-14', name: 'ุชูุฏูู ุดููู ุงูู ุงูุฌูุงุช ุงูุนููุง ุงู ุฑูุน ุดููู ุฌูุงุนูุฉ ุงู ุงูุชูุฏูุฏ ุจุฐูู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-15', name: 'ุงุณุชุบูุงู ุงูุฑุชุจุฉ ุงูููุงุฏูุฉ ูุชุญุฑูุถ ุงูุฒููุงุก ุนูู ุฑูุถ ุงูุฃูุงูุฑ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-16', name: 'ุงูุงุฌุชูุงุน ูู ุงุฌู ููุงูุดุฉ ุฃู ุฃููุฑ ุบูุฑ ูุดุฑูุนุฉ ุชุชุนูู ุจุงููุฌูุฏูู ุงู ุงููุนูุฏ ูุบูุฑูุง', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-17', name: 'ุงูุงุชูุงู ุงูุนูุฏู ูุฃู ูู ุงูุฃุดูุงุก ุงูุชู ูููููุง ุงููุนูุฏ ุงู ูุณุชุนูููุง', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-18', name: 'ุถุจุท ุฐุฎูุฑุฉ ุงู ุณูุงุญ ุจุญูุฒุฉ ุงูุทุงูุจ ุจุนุฏ ููุงูุฉ ุงูุชูุงุฑูู ุงู ุงูุฑูุงูุฉ ุจุนุฏ ุชุณููู ุงูุณูุงุญ ูููุณุชูุฏุน', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-19', name: 'ุงูุนูุจ ูู ุงูุฐุงุช ุงูุฅูููุฉ ุงู ุณุจ ุงูุฏูู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-20', name: 'ุฅุชูุงู ุณููู ุดุงุฆู ูุณุฆ ุฅูู ุณูุนุฉ ุงููุนูุฏ ุงู ุดุฎุตูุฉ ุงููุฌูุฏ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-21', name: 'ูุดุฑ ุตูุฑ ุจุงูุฒู ุงูุนุณูุฑู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-22', name: 'ุฅุชูุงู ุฃู ูุนู ูู ุงููุญุธูุฑุงุช ุงูููุตูุต ุนูููุง ูู ูุฐู ุงููุงุฆุญุฉ', penalty: 'ุญุฌุฒ ุฃุณุจูุนูู', deduction: 6 },
          { id: 'r1-23', name: 'ุงูุงุนุชุฏุงุก ุจุงููุนู ุงู ุจุงูููู ุงู ุงููุชุงุจุฉ ุงู ุจุงู ูุณููุฉ ูู ูุณุงุฆู ุงูุชุนุจูุฑ ุงูุฃุฎุฑู ุนูู ุฒููู ุฏุงุฎู ุงููุนูุฏ ุงู ุฎุงุฑุฌู ุงู ุงูุชุญุฑูุถ ุนูู ุฐูู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-24', name: 'ุงูุบูุงุจ ุนู ุฃุฏุงุก ุงูุงูุชุญุงูุงุช ุงู ุงูุงุฎุชุจุงุฑุงุช ุจุฏูู ุนุฐุฑ', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r1-25', name: 'ุงูุดุฑูุน ูู ุงููุฑูุจ ูู ุงููุนูุฏ ุงู ุงูุญุฌุฒ', penalty: 'ุฃุณุจูุนูู', deduction: 6 },
          { id: 'r1-26', name: 'ุงูุณูุฑ ุงูู ุฎุงุฑุฌ ุงูุฏููุฉ ุงุซูุงุก ุงูุงุฌุงุฒุงุช ุจุฏูู ุงุฐู ูู ุงููุนูุฏ', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r1-27', name: 'ุนุฏู ุงูุฅุจูุงุบ ุนู ุงูุฃูุฑุงุถ ุงููุจุงุฆูุฉ', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-28', name: 'ุงูุฎุฑูุฌ ุงู ุงูุฏุฎูู ูู ูุงูู ุงููุนูุฏ ูู ุบูุฑ ุงูููุงู ุงููุฎุตุต ูุฐูู', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r1-29', name: 'ุนุฏู ุงูุงูุชุฒุงู ุจุชุนูููุงุช ุงูุงู ุงูุณูุงุญ ุงู ุงูุฑูุงูุฉ', penalty: 'ุฃุณุจูุนูู', deduction: 6 },
          { id: 'r1-30', name: 'ููุงุฏุฉ ุงููุฑูุจุงุช ุฏุงุฎู ุงููุนูุฏ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r1-31', name: 'ุญูุงุฒุฉ ูุชุจ ุงู ูุทุจูุนุงุช ุชุชุถูู ููุงููู ุงู ูููู ุณูุงุณูู ุงู ุนูุงุฆุฏูุฉ ุชุชุนุงุฑุถ ูุน ุงูุฏูู ูุงูููู ูุงูุนุงุฏุงุช ุงููุทุฑูุฉ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        ]
      },
      {
        id: 'd2',
        name: 'ูุฎุงููุงุช ุงูุฏุฑุฌุฉ ุงูุซุงููุฉ (ูุธุงู ุงููุจูุช)',
        items: [
          { id: 'r2-1', name: 'ุชุฌุงูุฒ ุงูุงุฌุงุฒุฉ ุจุฏูู ุนุฐุฑ ููุจูู ููุฏุฉ ุชุฒูุฏ ุนูู (48) ุณุงุนุฉ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r2-2', name: 'ุชุฌุงูุฒ ุงูุงุฌุงุฒุฉ ุจุฏูู ุนุฐุฑ ููุจูู ููุฏุฉ ุชุฒูุฏ ุนูู (24) ุณุงุนุฉ ููุง ุชุชุฌุงูุฒ (48)', penalty: 'ุฃุณุจูุนูู', deduction: 6 },
          { id: 'r2-3', name: 'ุชุฌุงูุฒ ุงูุงุฌุงุฒุฉ ุจุฏูู ุนุฐุฑ ููุจูู ููุฏุฉ ุชุฒูุฏ ุนูู (60 ุฏูููุฉ) ููุง ุชุชุฌุงูุฒ (24) ุณุงุนุฉ', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-4', name: 'ุชุฌุงูุฒ ุงูุงุฌุงุฒุฉ ุจุฏูู ุนุฐุฑ ููุจูู ููุฏุฉ ูุง ุชุชุฌุงูุฒ (60) ุฏูููุฉ', penalty: 'ููู', deduction: 1.5 },
          { id: 'r2-5', name: 'ุงูุชุบูุจ ุนู ุงูุตูุงุฉ ุฏูู ุนุฐุฑ ููุจูู ุงู ุฃู ูุนู ููุซู ุงูุชูุงูุงู ูุญุฑูุฉ ุดูุฑ ุฑูุถุงู', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-6', name: 'ุงูุชุฏุฎูู ุงู ุงุณุชุฎุฏุงู ุงูููููุงุช ุงูููุงุซูุฉ ุงู ุงุฏูุงุชูุง ุฏุงุฎู ุงููุนูุฏ ุงู ุงุซูุงุก ุงูุฒูุงุฑุงุช ูุงูุชูุงุฑูู ุงูุฎุงุฑุฌูุฉ', penalty: 'ุฃุณุจูุนูู', deduction: 6 },
          { id: 'r2-7', name: 'ูุนุจ ุงููุฑู ุฏุงุฎู ุงููุนูุฏ', penalty: 'ุฃุณุจูุนูู', deduction: 6 },
          { id: 'r2-8', name: 'ุงูุงุณุชุฎุฏุงู ุบูุฑ ุงููุงุฆู ูุดุจูุฉ ุงูุงุชุตุงูุงุช ( ุงูุงูุชุฑูุช )', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-9', name: 'ุญูุงุฒุฉ ุฌูุงุฒ ุงู ุงูุซุฑ ูู ุฃุฌูุฒุฉ ุงููุงุชู ุงูุฌูุงู', penalty: 'ุฃุณุจูุนูู', deduction: 6 },
          { id: 'r2-10', name: 'ุงูุชุบูุจ ุนู ุงููุญุงุถุฑุงุช ุงููุธุฑูุฉ ุงู ุงูุจุฑุงูุฌ ุงูุชุฏุฑูุจูุฉ ุงู ุฃู ูู ุงููุงุฌุจุงุช ุงูุฑุณููุฉ ุงูุฃุฎุฑู ุจุฏูู ุนุฐุฑ ููุจูู', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-11', name: 'ุงูุชุณุจุจ ูู ุงูุงุถุฑุงุฑ ุจุงูููุณ ุจุบุฑุถ ุงูุงููุทุงุน ุนู ุงูุนูู ุงููููู', penalty: 'ุฃุณุจูุนูู', deduction: 6 },
          { id: 'r2-12', name: 'ููุฏ ุงู ุงุชูุงู ุฃู ุจุทุงูุฉ ุงู ุดุงุฑุฉ ุนุณูุฑูุฉ ุฑุณููุฉ ุงู ุฃู ูููุงุช ุนุณูุฑูุฉ ุฃุฎุฑู ูู ุญูุงุฒุชู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
          { id: 'r2-13', name: 'ุงุฏุฎุงู ุฃุดูุงุก ุบูุฑ ูุตุฑุญ ุจูุง ุฅูู ุงููุนูุฏ', penalty: 'ููู', deduction: 1.5 },
          { id: 'r2-14', name: 'ุญูุงุฒุฉ ุฃุฏูุงุช ุญุงุฏุฉ ูููู ุงู ุชุณุชุฎุฏู ูู ุฅูุฐุงุก ุงูุขุฎุฑูู', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-15', name: 'ุงููุฐุจ ุงู ุงูุฎุฏุงุน ุงู ุงูุชุญุงูู ุงู ุงูุชูุงุฑุถ ููุชูุฑุจ ูู ูุณุคูููุงุชู ูุทุงูุจ ุงู ูู ุจุฑูุงูุฌ ุงูุนูู ุงููููู', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-16', name: 'ุงูุฐูุงุจ ุงูู ุงููุฏููุฉ ุงุซูุงุก ูุฑุงุฌุนุฉ ุงููุณุชุดูู ูู ูุฑูุจุฉ ุงูุฅุณุนุงู', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-17', name: 'ูุฌุงุฒุงุฉ ูุฌูุฏ ุงูุฏู ูุง ูุญูู ุฑุชุจุฉ ููุงุฏูุฉ ููุฌูุฏ ุงุญุฏุซ ููู', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-18', name: 'ุงูุชุณุชุฑ ุนูู ุฃูุนุงู ุงู ุงููุงู ูุฎุงููุฉ ุงูุฃูุงูุฑ ูุงูุชุนูููุงุช ุงูุฎุงุตุฉ ุจุงููุนูุฏ', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-19', name: 'ุฅุชูุงู ุฃู ูุนู ูุฎุงูู ูููุธุงู ุงู ุงูุณููู ุงู ุงูุถุจุท ูุงูุฑุจุท ุงูุนุณูุฑู', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-20', name: 'ุนุฏู ุงูุชููุฏ ุจุงูุชุณูุณู ุงูุนุณูุฑู', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-21', name: 'ุนุฏู ุงุจูุงุบ ุงููุฌูุฏ ุนู ุงูุญูุงุฏุซ ุงูุชู ุชูุน ููู ุงู ุนููู', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r2-22', name: 'ุณูุก ุงุณุชุฎุฏุงู ุงูุตูุงุญูุงุช ูู ุงูุฑุชุจ ุงูููุงุฏูุฉ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r2-23', name: 'ุญูุงุฒุฉ ุฃู ูู ูุชุนููุงุช ุงููุงุชู ุงูุฌูุงู', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-24', name: 'ุญูุงุฒุฉ ุฃู ูู ุงูุขุช ุงูููู', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-25', name: 'ูุฌุงุฏูุฉ ุงููุณุคูููู ุงู ุงููุฏุฑุจูู ุงู ุฃุนุถุงุก ููุฆุฉ ุงูุชุฏุฑูุณ ุจูุฏู ุงูุงุซุงุฑุฉ ุงู ุชุนุทูู ุณูุฑ ุงูุจุฑุงูุฌ ุงู ุงูุฏุฑุงุณุฉ', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-26', name: 'ูุฌุงุฏูุฉ ุงูุฑุชุจ ุงูููุงุฏูุฉ ุจูุฏู ุงูุงุซุงุฑุฉ ุงู ุชุนุทูู ุณูุฑ ุงูุจุฑุงูุฌ ุงู ุงูุฏุฑุงุณุฉ', penalty: 'ููู', deduction: 1.5 },
          { id: 'r2-27', name: 'ุงูุชูุงุฌุฏ ูู ุฃูุงูู ุบูุฑ ูุตุฑุญ ุงูุชูุงุฌุฏ ูููุง ุงู ูู ุบูุฑ ุงูุฃููุงุช ุงูููุฑุฑุฉ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r2-28', name: 'ุงุฏุฎุงู ุงู ุงุฑุชุฏุงุก ูููุงุช ุงู ููุงุจุณ ุบูุฑ ููุฑุฑ ุงุฑุชุฏุงุฆูุง ุฏุงุฎู ุงููุนูุฏ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r2-29', name: 'ุงุฑุชุฏุงุก ุงูููุงุจุณ ุงูุนุณูุฑูุฉ ูู ุงูุงูุงูู ุงูุนุงูุฉ ูุงูุฃุณูุงู', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-30', name: 'ุทูุจ ุงูุนูุงุฏุฉ ุจุนุฏ ุงูุชูุงุก ุงูุชูููู ุงูุตุจุงุญู ุงู ุงูุชุฎูู ุนู ููุงุจูุฉ ุงูุทุจูุจ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r2-31', name: 'ุงูุชุฃุฎูุฑ ูู ุชูุฏูู ุฃูุฑุงู ุฑุณููุฉ ูุทููุจุฉ', penalty: 'ุญุฌุฒ ููู (ุนูุฏ ุงูุชุณููู)', deduction: 1.5 },
          { id: 'r2-32', name: 'ุนุฏู ูุถุน ุงููุฌูุฏ ุณูุงุญู ุงู ูููุงุชู ุงูุชุฏุฑูุจูุฉ ุจููุณู ูู ุงูููุงู ุงููุฎุตุต', penalty: 'ููู', deduction: 1.5 },
          { id: 'r2-33', name: 'ุนุฏู ูุธุงูุฉ ุงูุณูุงุญ ุงู ุญููุฉ ุจุทุฑููุฉ ุบูุฑ ุตุญูุญู', penalty: 'ููู', deduction: 1.5 },
          { id: 'r2-34', name: 'ุงููุฑูุจ ูู ุงูุญุตุต ุงู ุงูุชุฏุฑูุจ', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-35', name: 'ุนุฏู ุงูุฅุจูุงุบ ุนู ุงููุชุบูุจูู ูู ูุจู ุงูุฑุชุจ ุงูููุงุฏูุฉ', penalty: 'ููู', deduction: 1.5 },
          { id: 'r2-36', name: 'ุนุฏู ุงุจูุงุบ ุงููุฌูุฏ ุนู ูููุชู ุนูุฏ ูููุนู ูู ุงููุฎุงููุฉ', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r2-37', name: 'ุงูุงุชุตุงู ุจุถุจุงุท ุงููุนูุฏ ุงุซูุงุก ุงูุนุทูุงุช ูุงูุงุฌุงุฒุงุช ูููุง ูุฎุต ุงูุนูู ุฏูู ุงูุฑุฌูุน ุงูู ุงูุถุงุจุท ุงูููุงูุจ', penalty: 'ุฃุณุจูุน', deduction: 3 },
        ]
      },
      {
        id: 'd3',
        name: 'ูุฎุงููุงุช ุงูุฏุฑุฌุฉ ุงูุซุงูุซุฉ (ูุธุงู ุงููุจูุช)',
        items: [
          { id: 'r3-1', name: 'ุนุฏู ุฃุฏุงุก ุงูุชุญูุฉ ุงูุนุณูุฑูุฉ ุงู ุงูุฅููุงู ูู ุฃุฏุงุฆูุง', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r3-2', name: 'ุนุฏู ุงูุงุนุชูุงุก ุจุงููุธูุฑ ุงู ุงูููุฏุงู', penalty: 'ุญุตุฉ ุชุฏุฑูุจ', deduction: 0.5 },
          { id: 'r3-3', name: 'ุนุฏู ุงุฑุชุฏุงุก ุงูุฑุชุจ ูุงูุดุงุฑุงุช ูุบุทุงุก ุงูุฑุงุณ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r3-4', name: 'ูุฎุงููุฉ ุฃูุธูุฉ ูุชุนูููุงุช ุงููุจุงุณ ุงูููุฑุฑ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r3-5', name: 'ุงูุชุฌูุน ูู ุงูุณูู ุฏุงุฎู ุงูุบุฑู ุงู ุงูููุฑุงุช ูููุฒุงุญ ุงู ุงูุถุญู', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r3-6', name: 'ุชุฑู ุฃู ูููุงุช ุนุณูุฑูุฉ ุฃู ุดุฎุตูุฉ ูู ูุงุนุงุช ุงูุฏุฑุณ ุฃู ููุงุฏูู ุงูุชุฏุฑูุจ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r3-7', name: 'ุญูุงุฒุฉ ุฃุฏููุฉ ูุนูุงููุฑ ุบูุฑ ูุตุฑููุฉ ูู ุงูุทุจูุจ ุงููุฎุชุต ุจุฏูู ุงุฐู', penalty: 'ุญุตุฉ ุชุฏุฑูุจ', deduction: 0.5 },
          { id: 'r3-8', name: 'ูุบุงุฏุฑุฉ ุงููุณุชุดูู ุงู ุงูุนูุงุฏุฉ ุฏูู ุงุฐู', penalty: 'ููู', deduction: 1.5 },
          { id: 'r3-9', name: 'ุนุฏู ุชูุจูุฉ ุงููุฏุงุก ุงู ุนุฏู ุชูููุฐ ููุจุฉ ุงูููู ูู ุงูููุช ูุญุฏุฏ', penalty: 'ุญุตุฉ ุชุฏุฑูุจ', deduction: 0.5 },
          { id: 'r3-10', name: 'ุนุฏู ุงููุจุงูุงุฉ', penalty: 'ุญุตุชูู ุชุฏุฑูุจ', deduction: 1 },
          { id: 'r3-11', name: 'ูุถุน ุงูุงูุฏู ูู ุงูุฌููุจ ุงู ุชุดุงุจููุง ุงุซูุงุก ุงููุณูุฑ ุงู ุงูุชูุงุฌุฏ ูู ุงูููุงุฏูู ููุงุนุงุช ุงูุฏุงุฑุณุฉ ูุงูููุงุชุจ ูุงูููุฑุงุช', penalty: 'ููู', deduction: 1.5 },
          { id: 'r3-12', name: 'ุงุญุฏุงุซ ุงูุถูุถุงุก ุงู ุงูุฅุฒุนุงุฌ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r3-13', name: 'ุงูููู ุงุซูุงุก ุงููุญุงุถุฑุงุช ุงู ุฃููุงุช ุงููุฐุงูุฑุฉ ุงู ุงูุจุฑุงูุฌ ุงูุชุฏุฑูุจูุฉ', penalty: 'ููู', deduction: 1.5 },
          { id: 'r3-14', name: 'ุงูุชูุงุณู ุงุซูุงุก ุงููุญุงุถุฑุงุช ุงู ุฃููุงุช ุงููุฐุงูุฑุฉ ุงู ุงูุจุฑุงูุฌ ุงูุชุฏุฑูุจูุฉ', penalty: 'ุญุตุชูู ุชุฏุฑูุจ', deduction: 1 },
          { id: 'r3-15', name: 'ุงูุงุฎุชูุงุท ุจูุฑุชุจ ุงููุนูุฏ ุงู ุฒูุงุฑู ุจุฏูู ุฅุฐู', penalty: 'ููู', deduction: 1.5 },
          { id: 'r3-16', name: 'ุญูุงุฒุฉ ูุจุงูุบ ูุงููุฉ ุฃูุซุฑ ูู ุงููุตุฑุญ ุจูุง', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r3-17', name: 'ุฅุฎุฑุงุฌ ุงูุฃุทุนูุฉ ูุงููุดุฑูุจุงุช ูู ุงูููุฒ ุงูู ุงูุซููุฉ ุจุฏูู ุฅุฐู', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r3-18', name: 'ุงูุฅููุงู ูู ุงููุธุงูุฉ ูุชุฑุชูุจ ุงูุซููุฉ ุงู ุงูููุงุจุณ', penalty: 'ุญุตุชูู ุชุฏุฑูุจ', deduction: 1 },
          { id: 'r3-19', name: 'ุนุฏู ุงูุชุฒุงู ุงููุฌูุฏ ุจุงูุชุนูููุงุช ุงูุตุงุฏุฑุฉ ุฅููู', penalty: 'ููู', deduction: 1.5 },
          { id: 'r3-20', name: 'ูุฒุงููุฉ ุงูุฃูุนุงุจ ุงูุฑูุงุถูุฉ ูู ุบูุฑ ุงูุฒูุงู ูุงูููุงู ุงููุญุฏุฏูู', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r3-21', name: 'ุงูุงุณุชูุชุงุฑ ุจุญุฑูุฉ ุงููุณุฌุฏ ูููุงุณู ุงูุตูุงุฉ ูุงูุนุจุงุฏุฉ', penalty: 'ุฃุณุจูุน', deduction: 3 },
          { id: 'r3-22', name: 'ุนุฏู ุงูุณูุทุฑุฉ ูู ุงูุฑุชุจ ุงูููุงุฏูุฉ ุนูู ูู ูู ูู ุฅูุฑุชูู', penalty: '6 ุณุงุนุงุช', deduction: 1 },
          { id: 'r3-23', name: 'ุฃู ุณููู ุบูุฑ ูุงุฆู ุฃุซูุงุก ุงูุจุฑูุงูุฌ ุงููููู ุจุงููุนูุฏ ุงู ุงูุฒูุงุฑุงุช ุงูููุฏุงููุฉ ูุงููุฑุงุฌุนุงุช ุงูุทุจูุฉ ุงู ูู ุฃู ููุงู ูุชูุงุฌุฏ ููู ุงููุฌูุฏ ุจุตูุฉ ุฑุณููุฉ', penalty: 'ููู', deduction: 1.5 },
        ]
      }
    ]
  },
  // 2. ๐ ูุงุฆุญุฉ ุงููุณุชุฌุฏูู ูุงูุทูุจุฉ - ูุธุงู ุงูุซุงุจุช ุตุจุญ (ูุงููุฉ ุฏูู ููุต)
{
  id: 'recruits_fixed',
  name: 'ูุงุฆุญุฉ ุงููุณุชุฌุฏูู (ูุธุงู ุงูุซุงุจุช ุตุจุญ)',
  degrees: [
    {
      id: 'f1',
      name: 'ูุฎุงููุงุช ุงูุฏุฑุฌุฉ ุงูุฃููู (ุซุงุจุช ุตุจุญ)',
      items: [
        { id: 'f1-1', name: 'ุงูุบุด ูู ุงูุงูุชุญุงู ุ ุฃู ูุญุงููุฉ ุงูุบุด ุ ุฃู ูุณุงุนุฏุฉ ุทุงูุจ ุขุฎุฑ ุนูู ุงูุบุด', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-2', name: 'ุงูุญุตูู ุนูู ุงุณุฆูุฉ ุงูุงูุชุญุงูุงุช ุจุทุฑููุฉ ุบูุฑ ุฑุณููุฉ ุ ุงู ูุดุฑูุง ุ ุงู ุชูุฒูุนูุง ุงู ุงููุณุงุนุฏุฉ ูู ุฐูู ุงู ุงูุงุญุชูุงุธ ุจูุฑูุฉ ุงูุฅุฌุงุจุฉ ุจุนุฏ ุงูุชูุงุก ููุนุฏ ุงูุงูุชุญุงู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-3', name: 'ุงูููุงู ุจุฅุนุฏุงุฏ ุจุญูุซ ุงู ุฃูุฑุงู ุนูู ุนู ุทุงูุจ ุงุฎุฑ', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-4', name: 'ุชูุฏูู ุจุญูุซ ุงู ุฃูุฑุงู ุนูู ูุฃุณุชุงุฐ ุงูููุฑุฑ ููุณุช ูู ูุฌููุฏ ุงูุทุงูุจ ุฐุงุชู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-5', name: 'ุงูุฅุฎูุงู ุจุงููุธุงู ูุงูุชุนูููุงุช ุฏุงุฎู ูุงุนุฉ ุงูุงูุชุญุงู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-6', name: 'ุฑูุถ ุงูุฃูุงูุฑ ุงู ุงูุชุนูููุงุช ุงู ุงูุชุญุฑูุถ ุนูู ุฐูู ุงู ููุน ุงูุฒููุงุก ูู ุชูููุฐูุง ุจุฃู ูุณููุฉ', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-7', name: 'ุงูุงุดุชุฑุงู ูู ุดุฌุงุฑ ุฌูุงุนู ุงู ุงูุชุญุฑูุถ ุนููู ุฏุงุฎู ุงููุนูุฏ ุงู ุฎุงุฑุฌู', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-8', name: 'ุงูุงุนุชุฏุงุก ุจุงููุนู ุงู ุจุงูููู ุงู ุจุงููุชุงุจุฉ ุงู ุจุงู ูุณููุฉ ูู ูุณุงุฆู ุงูุชุนุจูุฑ ุงูุฃุฎุฑู ุนูู ุฃู ูู ุงูุนุงูููู ูู ุงููุนูุฏ', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-9', name: 'ุงููุฑุงุฑ ูู ุงููุนูุฏ ุงู ุงููุฑูุจ ูู ุงูุญุฌุฒ', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-10', name: 'ุชุนุงุทู ุงู ุญูุงุฒุฉ ุงูุนูุงููุฑ ุงูููููุนุฉ ุงู ุงููุดุฑูุจุงุช ุงููุญูููุฉ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-11', name: 'ุงูุฃูุนุงู ุงูุชู ุชุดูู ุงุญุฏู ุงูุฌุฑุงุฆู ุงูููุตูุต ุนูููุง ูู ุงูููุงููู ุงูุฌูุงุฆูุฉ', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-12', name: 'ุชุญุฑูุถ ุงูุฒููุงุก ุงู ููุนูู ูู ุงูุฌููุณ ูุฃุฏุงุก ุงูุงูุชุญุงูุงุช ุงู ุญุถูุฑ ุงููุญุงุถุฑุงุช', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-13', name: 'ูุดุงูุฏุฉ ุงูุฃููุงู ุงู ุงูุตูุฑ ุงูุฅุจุงุญูุฉ ูุบูุฑูุง ุนุจุฑ ุงููุณุงุฆุท ุงูุฅููุชุฑูููุฉ ุงู ุญูุงุฒุชูุง', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-14', name: 'ุชูุฏูู ุดููู ุงูู ุงูุฌูุงุช ุงูุนููุง ุงู ุฑูุน ุดููู ุฌูุงุนูุฉ ุงู ุงูุชูุฏูุฏ ุจุฐูู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-15', name: 'ุงุณุชุบูุงู ุงูุฑุชุจุฉ ุงูููุงุฏูุฉ ูุชุญุฑูุถ ุงูุฒููุงุก ุนูู ุฑูุถ ุงูุฃูุงูุฑ', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-16', name: 'ุงูุงุฌุชูุงุน ูู ุงุฌู ููุงูุดุฉ ุฃู ุฃููุฑ ุบูุฑ ูุดุฑูุนุฉ ุชุชุนูู ุจุงููุฌูุฏูู ุงู ุงููุนูุฏ ูุบูุฑูุง', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-17', name: 'ุงูุงุชูุงู ุงูุนูุฏู ูุฃู ูู ุงูุฃุดูุงุก ุงูุชู ูููููุง ุงููุนูุฏ ุงู ูุณุชุนูููุง', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-18', name: 'ุถุจุท ุฐุฎูุฑุฉ ุงู ุณูุงุญ ุจุญูุฒุฉ ุงูุทุงูุจ ุจุนุฏ ููุงูุฉ ุงูุชูุงุฑูู ุงู ุงูุฑูุงูุฉ ุจุนุฏ ุชุณููู ุงูุณูุงุญ ูููุณุชูุฏุน', penalty: 'ูุญุงู ุฅูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-19', name: 'ุงูุนูุจ ูู ุงูุฐุงุช ุงูุฅูููุฉ ุงู ุณุจ ุงูุฏูู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-20', name: 'ุฅุชูุงู ุณููู ุดุงุฆู ูุณุฆ ุฅูู ุณูุนุฉ ุงููุนูุฏ ุงู ุดุฎุตูุฉ ุงููุฌูุฏ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-21', name: 'ูุดุฑ ุตูุฑ ุจุงูุฒู ุงูุนุณูุฑู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-22', name: 'ุฅุชูุงู ุฃู ูุนู ูู ุงููุญุธูุฑุงุช ุงูููุตูุต ุนูููุง ูู ูุฐู ุงููุงุฆุญุฉ', penalty: '4 ุงูุงู', deduction: 6 },
        { id: 'f1-23', name: 'ุงูุงุนุชุฏุงุก ุจุงููุนู ุงู ุจุงูููู ุงู ุงููุชุงุจุฉ ุงู ุจุงู ูุณููุฉ ูู ูุณุงุฆู ุงูุชุนุจูุฑ ุงูุฃุฎุฑู ุนูู ุฒููู ุฏุงุฎู ุงููุนูุฏ ุงู ุฎุงุฑุฌู ุงู ุงูุชุญุฑูุถ ุนูู ุฐูู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-24', name: 'ุงูุบูุงุจ ุนู ุฃุฏุงุก ุงูุงูุชุญุงูุงุช ุงู ุงูุงุฎุชุจุงุฑุงุช ุจุฏูู ุนุฐุฑ', penalty: 'ููููู', deduction: 3 },
        { id: 'f1-25', name: 'ุงูุดุฑูุน ูู ุงููุฑูุจ ูู ุงููุนูุฏ ุงู ุงูุญุฌุฒ', penalty: '4 ุงูุงู', deduction: 6 },
        { id: 'f1-26', name: 'ุงูุณูุฑ ุงูู ุฎุงุฑุฌ ุงูุฏููุฉ ุงุซูุงุก ุงูุงุฌุงุฒุงุช ุจุฏูู ุงุฐู ูู ุงููุนูุฏ', penalty: 'ููููู', deduction: 3 },
        { id: 'f1-27', name: 'ุนุฏู ุงูุฅุจูุงุบ ุนู ุงูุฃูุฑุงุถ ุงููุจุงุฆูุฉ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-28', name: 'ุงูุฎุฑูุฌ ุงู ุงูุฏุฎูู ูู ูุงูู ุงููุนูุฏ ูู ุบูุฑ ุงูููุงู ุงููุฎุตุต ูุฐูู', penalty: 'ููููู', deduction: 3 },
        { id: 'f1-29', name: 'ุนุฏู ุงูุงูุชุฒุงู ุจุชุนูููุงุช ุงูุงู ุงูุณูุงุญ ุงู ุงูุฑูุงูุฉ', penalty: '4 ุงูุงู', deduction: 6 },
        { id: 'f1-30', name: 'ููุงุฏุฉ ุงููุฑูุจุงุช ุฏุงุฎู ุงููุนูุฏ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f1-31', name: 'ุญูุงุฒุฉ ูุชุจ ุงู ูุทุจูุนุงุช ุชุชุถูู ููุงููู ุงู ูููู ุณูุงุณูู ุงู ุนูุงุฆุฏูุฉ ุชุชุนุงุฑุถ ูุน ุงูุฏูู ูุงูููู ูุงูุนุงุฏุงุช ุงููุทุฑูุฉ', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
      ]
    },
    {
      id: 'f2',
      name: 'ูุฎุงููุงุช ุงูุฏุฑุฌุฉ ุงูุซุงููุฉ (ุซุงุจุช ุตุจุญ)',
      items: [
        { id: 'f2-10', name: 'ุงูุชุบูุจ ุนู ุงููุญุงุถุฑุงุช ุงููุธุฑูุฉ ุงู ุงูุจุฑุงูุฌ ุงูุชุฏุฑูุจูุฉ ุงู ุฃู ูู ุงููุงุฌุจุงุช ุงูุฑุณููุฉ ุงูุฃุฎุฑู ุจุฏูู ุนุฐุฑ ููุจูู', penalty: 'ููููู', deduction: 3 },
        { id: 'f2-11', name: 'ุงูุชุณุจุจ ูู ุงูุงุถุฑุงุฑ ุจุงูููุณ ุจุบุฑุถ ุงูุงููุทุงุน ุนู ุงูุนูู ุงููููู', penalty: 'ููููู', deduction: 3 },
        { id: 'f2-12', name: 'ููุฏ ุงู ุงุชูุงู ุฃู ุจุทุงูุฉ ุงู ุดุงุฑุฉ ุนุณูุฑูุฉ ุฑุณููุฉ ุงู ุฃู ูููุงุช ุนุณูุฑูุฉ ุฃุฎุฑู ูู ุญูุงุฒุชู', penalty: 'ูุญุงู ุงูู ูุฌูุฉ ุงูุชุญููู', deduction: 6 },
        { id: 'f2-13', name: 'ุงุฏุฎุงู ุฃุดูุงุก ุบูุฑ ูุตุฑุญ ุจูุง ุงูู ุงููุนูุฏ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f2-14', name: 'ุญูุงุฒุฉ ุฃุฏูุงุช ุญุงุฏุฉ ูููู ุงู ุชุณุชุฎุฏู ูู ุฅูุฐุงุก ุงูุขุฎุฑูู', penalty: 'ููููู', deduction: 3 },
        { id: 'f2-15', name: 'ุงููุฐุจ ุงู ุงูุฎุฏุงุน ุงู ุงูุชุญุงูู ุงู ุงูุชูุงุฑุถ ููุชูุฑุจ ูู ูุณุคูููุงุชู ูุทุงูุจ ุงู ูู ุจุฑูุงูุฌ ุงูุนูู ุงููููู', penalty: 'ููููู', deduction: 3 },
        { id: 'f2-16', name: 'ุงูุฐูุงุจ ุงูู ุงููุฏููุฉ ุงุซูุงุก ูุฑุงุฌุนุฉ ุงููุณุชุดูู ูู ูุฑูุจุฉ ุงูุฅุณุนุงู', penalty: 'ููููู', deduction: 3 },
        { id: 'f2-17', name: 'ูุฌุงุฒุงุฉ ูุฌูุฏ ุงูุฏู ูุง ูุญูู ุฑุชุจุฉ ููุงุฏูุฉ ููุฌูุฏ ุงุญุฏุซ ููู', penalty: 'ููููู', deduction: 3 },
        { id: 'f2-18', name: 'ุงูุชุณุชุฑ ุนูู ุฃูุนุงู ุงู ุงููุงู ูุฎุงููุฉ ุงูุฃูุงูุฑ ูุงูุชุนูููุงุช ุงูุฎุงุตุฉ ุจุงููุนูุฏ', penalty: 'ููููู', deduction: 3 },
        { id: 'f2-19', name: 'ุฅุชูุงู ุฃู ูุนู ูุฎุงูู ูููุธุงู ุงู ุงูุณููู ุงู ุงูุถุจุท ูุงูุฑุจุท ุงูุนุณูุฑู', penalty: 'ููููู', deduction: 3 },
        { id: 'f2-20', name: 'ุนุฏู ุงูุชููุฏ ุจุงูุชุณูุณู ุงูุนุณูุฑู', penalty: 'ููููู', deduction: 3 },
        { id: 'f2-21', name: 'ุนุฏู ุงุจูุงุบ ุงููุฌูุฏ ุนู ุงูุญูุงุฏุซ ุงูุชู ุชูุน ููู ุงู ุนููู', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f2-22', name: 'ุณูุก ุงุณุชุฎุฏุงู ุงูุตูุงุญูุงุช ูู ุงูุฑุชุจ ุงูููุงุฏูุฉ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f2-23', name: 'ุญูุงุฒุฉ ุฃู ูู ูุชุนููุงุช ุงููุงุชู ุงูุฌูุงู', penalty: 'ุงุณุจูุน', deduction: 6 },
        { id: 'f2-24', name: 'ุญูุงุฒุฉ ุฃู ูู ุงูุขุช ุงูููู', penalty: 'ููููู', deduction: 3 },
        { id: 'f2-25', name: 'ูุฌุงุฏูุฉ ุงููุณุคูููู ุงู ุงููุฏุฑุจูู ุงู ุฃุนุถุงุก ููุฆุฉ ุงูุชุฏุฑูุณ ุจูุฏู ุงูุงุซุงุฑุฉ ุงู ุชุนุทูู ุณูุฑ ุงูุจุฑุงูุฌ ุงู ุงูุฏุฑุงุณุฉ', penalty: 'ุงุณุจูุน', deduction: 6 },
        { id: 'f2-26', name: 'ูุฌุงุฏูุฉ ุงูุฑุชุจ ุงูููุงุฏูุฉ ุจูุฏู ุงูุงุซุงุฑุฉ ุงู ุชุนุทูู ุณูุฑ ุงูุจุฑุงูุฌ ุงู ุงูุฏุฑุงุณุฉ', penalty: 'ููู', deduction: 1.5 },
        { id: 'f2-27', name: 'ุงูุชูุงุฌุฏ ูู ุฃูุงูู ุบูุฑ ูุตุฑุญ ุงูุชูุงุฌุฏ ูููุง ุงู ูู ุบูุฑ ุงูุฃููุงุช ุงูููุฑุฑุฉ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f2-28', name: 'ุงุฏุฎุงู ุงู ุงุฑุชุฏุงุก ูููุงุช ุงู ููุงุจุณ ุบูุฑ ููุฑุฑ ุงุฑุชุฏุงุฆูุง ุฏุงุฎู ุงููุนูุฏ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f2-29', name: 'ุงุฑุชุฏุงุก ุงูููุงุจุณ ุงูุนุณูุฑูุฉ ูู ุงูุงูุงูู ุงูุนุงูุฉ ูุงูุฃุณูุงู', penalty: 'ููู', deduction: 1.5 },
        { id: 'f2-30', name: 'ุทูุจ ุงูุนูุงุฏุฉ ุจุนุฏ ุงูุชูุงุก ุงูุชูููู ุงูุตุจุงุญู ุงู ุงูุชุฎูู ุนู ููุงุจูุฉ ุงูุทุจูุจ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f2-31', name: 'ุงูุชุฃุฎูุฑ ูู ุชูุฏูู ุฃูุฑุงู ุฑุณููุฉ ูุทููุจุฉ', penalty: '6 ุณุงุนุงุช (ุนูุฏ ุงูุชุณููู)', deduction: 1 },
        { id: 'f2-32', name: 'ุนุฏู ูุถุน ุงููุฌูุฏ ุณูุงุญู ุงู ูููุงุชู ุงูุชุฏุฑูุจูุฉ ุจููุณู ูู ุงูููุงู ุงููุฎุตุต', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f2-33', name: 'ุนุฏู ูุธุงูุฉ ุงูุณูุงุญ ุงู ุญููุฉ ุจุทุฑููุฉ ุบูุฑ ุตุญูุญู', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f2-34', name: 'ุงููุฑูุจ ูู ุงูุญุตุต ุงู ุงูุชุฏุฑูุจ', penalty: 'ููููู', deduction: 3 },
        { id: 'f2-35', name: 'ุนุฏู ุงูุฅุจูุงุบ ุนู ุงููุชุบูุจูู ูู ูุจู ุงูุฑุชุจ ุงูููุงุฏูุฉ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f2-36', name: 'ุนุฏู ุงุจูุงุบ ุงููุฌูุฏ ุนู ูููุชู ุนูุฏ ูููุนู ูู ุงููุฎุงููุฉ', penalty: 'ููููู', deduction: 3 },
        { id: 'f2-37', name: 'ุงูุงุชุตุงู ุจุถุจุงุท ุงููุนูุฏ ุงุซูุงุก ุงูุนุทูุงุช ูุงูุงุฌุงุฒุงุช ูููุง ูุฎุต ุงูุนูู ุฏูู ุงูุฑุฌูุน ุงูู ุงูุถุงุจุท ุงูููุงูุจ', penalty: 'ููููู', deduction: 3 },
      ]
    },
    {
      id: 'f3',
      name: 'ูุฎุงููุงุช ุงูุฏุฑุฌุฉ ุงูุซุงูุซุฉ (ุซุงุจุช ุตุจุญ)',
      items: [
        { id: 'f3-1', name: 'ุนุฏู ุฃุฏุงุก ุงูุชุญูุฉ ุงูุนุณูุฑูุฉ ุงู ุงูุฅููุงู ูู ุฃุฏุงุฆูุง', penalty: 'ููููู', deduction: 3 },
        { id: 'f3-2', name: 'ุนุฏู ุงูุงุนุชูุงุก ุจุงููุธูุฑ ุงู ุงูููุฏุงู', penalty: 'ุญุตุฉ ุชุฏุฑูุจ', deduction: 0.5 },
        { id: 'f3-3', name: 'ุนุฏู ุงุฑุชุฏุงุก ุงูุฑุชุจ ูุงูุดุงุฑุงุช ูุบุทุงุก ุงูุฑุงุณ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f3-4', name: 'ูุฎุงููุฉ ุฃูุธูุฉ ูุชุนูููุงุช ุงููุจุงุณ ุงูููุฑุฑ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f3-5', name: 'ุงูุชุฌูุน ูู ุงูุณูู ุฏุงุฎู ุงูุบุฑู ุงู ุงูููุฑุงุช ูููุฒุงุญ ุงู ุงูุถุญู', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f3-6', name: 'ุชุฑู ุฃู ูููุงุช ุนุณูุฑูุฉ ุฃู ุดุฎุตูุฉ ูู ูุงุนุงุช ุงูุฏุฑุณ ุฃู ููุงุฏูู ุงูุชุฏุฑูุจ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f3-7', name: 'ุญูุงุฒุฉ ุฃุฏููุฉ ูุนูุงููุฑ ุบูุฑ ูุตุฑููุฉ ูู ุงูุทุจูุจ ุงููุฎุชุต ุจุฏูู ุงุฐู', penalty: 'ุญุตุฉ ุชุฏุฑูุจ', deduction: 0.5 },
        { id: 'f3-8', name: 'ูุบุงุฏุฑุฉ ุงููุณุชุดูู ุงู ุงูุนูุงุฏุฉ ุฏูู ุงุฐู', penalty: 'ููู', deduction: 1.5 },
        { id: 'f3-9', name: 'ุนุฏู ุชูุจูุฉ ุงููุฏุงุก ุงู ุนุฏู ุชูููุฐ ููุจุฉ ุงูููู ูู ุงูููุช ูุญุฏุฏ', penalty: 'ุญุตุฉ ุชุฏุฑูุจ', deduction: 0.5 },
        { id: 'f3-10', name: 'ุนุฏู ุงููุจุงูุงุฉ', penalty: 'ุญุตุชูู ุชุฏุฑูุจ', deduction: 1 },
        { id: 'f3-11', name: 'ูุถุน ุงูุงูุฏู ูู ุงูุฌููุจ ุงู ุชุดุงุจููุง ุงุซูุงุก ุงููุณูุฑ ุงู ุงูุชูุงุฌุฏ ูู ุงูููุงุฏูู ููุงุนุงุช ุงูุฏุงุฑุณุฉ ูุงูููุงุชุจ ูุงูููุฑุงุช', penalty: 'ููู', deduction: 1.5 },
        { id: 'f3-12', name: 'ุงุญุฏุงุซ ุงูุถูุถุงุก ุงู ุงูุฅุฒุนุงุฌ', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f3-13', name: 'ุงูููู ุงุซูุงุก ุงููุญุงุถุฑุงุช ุงู ุฃููุงุช ุงููุฐุงูุฑุฉ ุงู ุงูุจุฑุงูุฌ ุงูุชุฏุฑูุจูุฉ', penalty: 'ููู', deduction: 1.5 },
        { id: 'f3-14', name: 'ุงูุชูุงุณู ุงุซูุงุก ุงููุญุงุถุฑุงุช ุงู ุฃููุงุช ุงููุฐุงูุฑุฉ ุงู ุงูุจุฑุงูุฌ ุงูุชุฏุฑูุจูุฉ', penalty: 'ุญุตุชูู ุชุฏุฑูุจ', deduction: 1 },
        { id: 'f3-15', name: 'ุงูุงุฎุชูุงุท ุจูุฑุชุจ ุงููุนูุฏ ุงู ุฒูุงุฑ ุจุฏูู ุฅุฐู', penalty: 'ููู', deduction: 1.5 },
        { id: 'f3-16', name: 'ุญูุงุฒุฉ ูุจุงูุบ ูุงููุฉ ุฃูุซุฑ ูู ุงููุตุฑุญ ุจูุง', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f3-17', name: 'ุฅุฎุฑุงุฌ ุงูุฃุทุนูุฉ ูุงููุดุฑูุจุงุช ูู ุงูููุฒ ุงูู ุงูุซููุฉ ุจุฏูู ุฅุฐู', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f3-18', name: 'ุงูุฅููุงู ูู ุงููุธุงูุฉ ูุชุฑุชูุจ ุงูุซููุฉ ุงู ุงูููุงุจุณ', penalty: 'ุญุตุชูู ุชุฏุฑูุจ', deduction: 1 },
        { id: 'f3-19', name: 'ุนุฏู ุงูุชุฒุงู ุงููุฌูุฏ ุจุงูุชุนูููุงุช ุงูุตุงุฏุฑุฉ ุฅููู', penalty: 'ููู', deduction: 1.5 },
        { id: 'f3-20', name: 'ูุฒุงููุฉ ุงูุฃูุนุงุจ ุงูุฑูุงุถูุฉ ูู ุบูุฑ ุงูุฒูุงู ูุงูููุงู ุงููุญุฏุฏูู', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f3-21', name: 'ุงูุงุณุชูุชุงุฑ ุจุญุฑูุฉ ุงููุณุฌุฏ ูููุงุณู ุงูุตูุงุฉ ูุงูุนุจุงุฏุฉ', penalty: 'ููููู', deduction: 3 },
        { id: 'f3-22', name: 'ุนุฏู ุงูุณูุทุฑุฉ ูู ุงูุฑุชุจ ุงูููุงุฏูุฉ ุนูู ูู ูู ูู ุฅูุฑุชูู', penalty: '6 ุณุงุนุงุช', deduction: 1 },
        { id: 'f3-23', name: 'ุฃู ุณููู ุบูุฑ ูุงุฆู ุฃุซูุงุก ุงูุจุฑูุงูุฌ ุงููููู ุจุงููุนูุฏ ุงู ุงูุฒูุงุฑุงุช ุงูููุฏุงููุฉ ูุงููุฑุงุฌุนุงุช ุงูุทุจูุฉ ุงู ูู ุฃู ููุงู ูุชูุงุฌุฏ ููู ุงููุฌูุฏ ุจุตูุฉ ุฑุณููุฉ', penalty: 'ููู', deduction: 1.5 },
      ]
    }
  ]
},
  {
    id: 'specialized',
    name: 'ุงูุฏูุฑุงุช ุงูุญุชููุฉ ูุงูุชุฎุตุตูุฉ',
    degrees: [
      {
        id: 's1',
        name: 'ูุฎุงููุงุช ุงูุฏุฑุฌุฉ ุงูุฃููู',
        items: [
          { id: 's1-1', name: 'ุนุฏู ุงูุฅุจูุงุบ ุนู ุงูุฃูุฑุงุถ ุงููุจุงุฆูุฉ', penalty: 'ูุตู ูู ุงูุฏูุฑุฉ', deduction: 2 },
          { id: 's1-2', name: 'ุญูุงุฒุฉ ูุชุจ ุฃู ูุทุจูุนุงุช ุชุชุถูู ููุงููู ุฃู ูููู ุณูุงุณูุฉ ุฃู ุนูุงุฆุฏูุฉ ุชุชุนุงุฑุถ ูุน ุงูุฏูู ูุงูููู ูุงูุนุงุฏุงุช ูุงูุชูุงููุฏ ุงููุทุฑูุฉ', penalty: 'ูุตู ูู ุงูุฏูุฑุฉ', deduction: 2 },
          { id: 's1-3', name: 'ุฅุฐุง ุชุถูููุช ูุฑูุฉ ุงูุฅุฌุงุจุฉ ุฃูุฑุงู ูุง ูุนุฏ ูุฐูุงู ุฃู ุฃูุฑุงู ูุฎุงููุงู ููุขุฏุงุจ ุงูุนุงูุฉ', penalty: 'ูุตู ูู ุงูุฏูุฑุฉ', deduction: 2 },
          { id: 's1-4', name: 'ูุณ ุงูุฐุงุช ุงูุฅูููุฉ ุฃู ุณุจ ุงูุฏูู', penalty: 'ูุตู ูู ุงูุฏูุฑุฉ', deduction: 2 },
          { id: 's1-5', name: 'ุชุนุงุทู ุฃู ุญูุงุฒุฉ ุงูุนูุงููุฑ ุงูููููุนุฉ ุฃู ุงููุดุฑูุจุงุช ุงููุญูููุฉ', penalty: 'ูุตู ูู ุงูุฏูุฑุฉ', deduction: 2 },
          { id: 's1-6', name: 'ุงูุงุนุชุฏุงุก ุจุงููุนู ุฃู ุจุงู ูุณููุฉ ูู ูุณุงุฆู ุงูุชุนุจูุฑ ุงูุฃุฎุฑู ุนูู ุฃู ูู ุงูุนุงูููู ุจุงููุนูุฏ', penalty: 'ูุตู ูู ุงูุฏูุฑุฉ', deduction: 2 },
          { id: 's1-7', name: 'ุงููุฑุงุฑ ูู ุฌูุฉ ุงูุชุฏุฑูุจ ุงู ุงูุฏุฎูู ุงูููุง ุจุฏูู ุชุตุฑูุญ ุฃู ุงููุฑูุจ ูู ุงูุญุฌุฒ', penalty: 'ูุตู ูู ุงูุฏูุฑุฉ', deduction: 2 },
          { id: 's1-8', name: 'ุฑูุถ ุงูุฃูุงูุฑ ุฃู ุงูุชุนูููุงุช ุฃู ููุน ุงูุฒููุงุก ูู ุชูููุฐูุง ุจุงู ูุณููุฉ ุฃู ุงูุชุญุฑูุถ ุนูู ุฐูู', penalty: 'ูุตู ูู ุงูุฏูุฑุฉ', deduction: 2 },
          { id: 's1-9', name: 'ุงูุงุดุชุฑุงู ูู ุชุดุงุฌุฑ ุฌูุงุนู ุฃู ุงูุชุญุฑูุถ ุนููู ุฏุงุฎู ุงููุนูุฏ', penalty: 'ุงูุฅุญุงูุฉ ููุชุญููู', deduction: 2 },
          { id: 's1-10', name: 'ุฅุชูุงู ุณููู ูุดูู ูุณุฆ ุงูู ุณูุนุฉ ุงููุฒุงุฑุฉ ุฃู ุดุฎุตูุฉ ุงููุชุฏุฑุจ', penalty: 'ุงูุฅุญุงูุฉ ููุชุญููู', deduction: 2 },
          { id: 's1-11', name: 'ุงูุฅุชูุงู ุงูุนูุฏู ูุฃู ูู ุงูุฃุดูุงุก ุงูุชู ูููููุง ุงููุนูุฏ ุฃู ูุณุชุนูููุง ุงููุชุฏุฑุจ', penalty: 'ุงูุฅุญุงูุฉ ููุชุญููู', deduction: 2 },
          { id: 's1-12', name: 'ุงูุฅุฎูุงู ุจุงููุธุงู ูุงูุชุนูููุงุช ุฏุงุฎู ูุงุนุฉ ุงูุงูุชุญุงู', penalty: 'ุงูุฅุญุงูุฉ ููุชุญููู', deduction: 2 },
          { id: 's1-13', name: 'ุงูุญุตูู ุบูุฑ ุงูุฑุณูู ุนูู ุฃูุฑุงู ุฃุณุฆูุฉ ุงูุงูุชุญุงูุงุช ุฃู ูุดุฑูุง ุฃู ุชูุฒูุนูุง ุฃู ุงููุณุงุนุฏุฉ ูู ุฐูู ุฃู ุงูุงุญุชูุงุธ ุจูุฑูุฉ ุงูุฅุฌุงุจุฉ ุจุนุฏ ุงูุชูุงุก ููุนุฏ ุงูุงูุชุญุงู', penalty: 'ุงูุฅุญุงูุฉ ููุชุญููู', deduction: 2 },
          { id: 's1-14', name: 'ุถุจุท ุฃู ุฐุฎูุฑู ุฃู ุณูุงุญ ุจุญูุฒุฉ ุงููุชุฏุฑุจ ุจุนุฏ ููุงูุฉ ุงูุชูุงุฑูู ุฃู ุงูุฑูุงูุฉ ุจุนุฏ ุชุณููู ุงูุณูุงุญ ูููุณุชูุฏุน', penalty: 'ุงูุฅุญุงูุฉ ููุชุญููู', deduction: 2 },
          { id: 's1-15', name: 'ุงูุชุญุฑูุถ ูู ูุจู ุงูุฑุชุจ ุงูููุงุฏูุฉ ุฃู ุงููุชุฏุฑุจูู ููุฒููุงุก ุนูู ุฑูุถ ุงูุฃูุงูุฑ', penalty: 'ุงูุฅุญุงูุฉ ููุชุญููู', deduction: 2 },
          { id: 's1-16', name: 'ุงูุฅููุงู ูู ุงููุญุงูุธุฉ ุนูู ุงููููุงุช ูุงูุนูุฏุฉ ูุงูุจุทุงูุฉ ูุงูุดุงุฑุฉ ุงูุนุณูุฑูุฉ ุฃู ุฅุฎุฑุงุฌูุง ูู ุงูุฃูุงูู ุงููุฎุตุตุฉ', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-17', name: 'ุงูุงุณุชูุชุงุฑ ุจุญุฑูุฉ ุงููุณุฌุฏุ ูููุงุณู ุงูุตูุงุฉ ูุงูุนุจุงุฏุฉ', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-18', name: 'ุชูุฏูู ุดููู ุงูู ุงูุฌูุงุช ุงูุนููุง ุฃู ุฑูุน ุดููู ุฌูุงุนูุฉ ุฃู ุงูุชูุฏูุฏ ุจุฐูู', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-19', name: 'ููุงุฏุฉ ุงููุฑูุจุฉ ุจุณุฑุนุฉ ุชุชุฌุงูุฒ ุงูุณุฑุนุฉ ุงููุญุฏุฏุฉ ุฏุงุฎู ุงููุนูุฏ', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-20', name: 'ูุฎุงููุฉ ุงูุชุนูููุงุช ุงููุชุนููุฉ ุจุงุณุชุฎุฏุงู ุงูุณูุงุญ ูุงูุฐุฎูุฑุฉ', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-21', name: 'ุญูุงุฒุฉ ุฃู ูู ุขูุงุช ุงูููู', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-22', name: 'ุญูุงุฒุฉ ุฃุฏูุงุช ุญุงุฏู ูููู ุฃู ุชุณุชุฎุฏู ูู ุฅูุฐุงุก ุงูุขุฎุฑูู', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-23', name: 'ุนุฏู ุงูุงูุชุฒุงู ุจุชุนูููุงุช ูุดุฑูุท ุงูุฃูู ูุงูุณูุงูุฉ ุงูููุฑุฑุฉ ููุชุฏุฑูุจ', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-24', name: 'ุงููุฐุจ ุฃู ุงูุฎุฏุงุน ุฃู ุงูุชุญุงูู ุฃู ุงูุชูุงุฑุถ ููุชูุฑุจ ูู ูุณุคูููุงุชู ููุชุฏุฑุจ ุฃู ูู ุจุฑูุงูุฌ ุงูุนูู ุงููููู', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-25', name: 'ุงูุชุฏุฎูู ุงู ุงุณุชุฎุฏุงู ุงูููููุงุช ุงูููุงุซูุฉ ุฃู ุงุฏูุงุชูุง ุฏุงุฎู ุงููุนูุฏ ุฃู ุงุซูุงุก ุงูุฒูุงุฑุงุช ูุงูุชูุงุฑูู ุงูุฎุงุฑุฌูุฉ', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-26', name: 'ูุฌุงุฏูุฉ ุงููุณุคูููู ุฃู ุงููุฏุฑุจูู ุฃู ุฃุนุถุงุก ููุฆุฉ ุงูุชุฏุฑูุณ ุจูุฏู ุงูุฅุซุงุฑุฉ ุฃู ุชุนุทูู ุณูุฑ ุงูุจุฑูุงูุฌ', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-27', name: 'ุงูุชุณุจุจ ุจุงูุฅุถุฑุงุฑ ุจุงูููุณ ุจุบุฑุถ ุงูุงููุทุงุน ุนู ุจุฑูุงูุฌ ุงูุนูู ุงููููู', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-28', name: 'ุฅุชูุงู ุฃู ูุนู ูุฎุงูู ูููุธุงู ุฃู ุงูุณููู ุฃู ุงูุถุจุท ูุงูุฑุจุท ุงูุนุณูุฑู', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-29', name: 'ุงูุฅุฏูุงุก ุจูุนูููุงุช ุบูุฑ ุตุญูุญุฉ ูุฃู ููู ูู ุตูุฉ ุฑุณููุฉ ูู ุชุฏุฑูุจู ุฃู ุฅุนุงุดุชู', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
          { id: 's1-30', name: 'ุชุตููุฑ ุงููููุงุช ุฃู ุงูุนูุฏุฉ ุงูุนุณูุฑูุฉ ุฃู ูุฑุงูู ุงููุนูุฏ ูุงูููุงุฏูู ุงูุฎุงุฑุฌูุฉ ุฃู ุตูุฑ ุจุงูุฒู ุงูุนุณูุฑู', penalty: 'ุญุฌุฒ ููู ุฏุงุฎูู', deduction: 2 },
        ]
      },
      {
        id: 's2',
        name: 'ูุฎุงููุงุช ุงูุฏุฑุฌุฉ ุงูุซุงููุฉ',
        items: [
          { id: 's2-1', name: 'ุฅุฏุฎุงู ุฃุดูุงุก ุบูุฑ ูุตุฑุญ ุจูุง ุฅูู ุงููุนูุฏ', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-2', name: 'ุงูุฐูุงุจ ุฅูู ุงููุฏููุฉ ุฃุซูุงุก ูุฑุงุฌุนุฉ ุงููุณุชุดูู ูู ูุฑูุจุฉ ุงูุฅุณุนุงู ุฃู ุฃู ูุณููุฉ ููู ุฃุฎุฑู', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-3', name: 'ุนุฏู ุฃุฏุงุก ุงูุชุญูุฉ ุฃู ุงูุญุฑูุฉ ุงูุนุณูุฑูุฉุ ุฃู ุงูุฅููุงู ูู ุฃุฏุงุฆูุง', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-4', name: 'ุงูุฎุฑูุฌ ุฃู ุงูุฏุฎูู ูู ูุงูู ุงููุนูุฏ ูู ุบูุฑ ุงูููุงู ุงููุฎุตุต ูุฐูู', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-5', name: 'ุงููุฑูุจ ูู ุงูุจุฑุงูุฌ ุงูุชุฏุฑูุจูุฉ', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-6', name: 'ุนุฏู ุงูุฅุจูุงุบ ุนู ุงูุญูุงุฏุซ ุงูุชู ุชูุน ููู ุฃู ุนููู', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-7', name: 'ุงูุงุฎุชูุงุท ุจูุฑุชุจ ุงููุนูุฏ ุฃู ุฒูุงุฑู ุจุฏูู ุฅุฐู', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-8', name: 'ุนุฏู ุงูุชููุฏ ุจุงูุชุณูุณู ุงูุนุณูุฑู', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-9', name: 'ูุฒุงููุฉ ุงูุฃูุนุงุจ ุงูุฑูุงุถูุฉ ูู ุบูุฑ ุงูุฒูุงู ูุงูููุงู ุงููุญุฏุฏูู', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-10', name: 'ูุบุงุฏุฑุฉ ุงููุณุชุดูู ุฃู ุงูุนูุงุฏุฉ ุงูุฏุงุฎููุฉ/ุงูุฎุงุฑุฌูุฉ ุฏูู ุฅุฐู', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-11', name: 'ุงูููู ุฃุซูุงุก ุงููุญุงุถุฑุงุชุ ุฃู ุฃููุงุช ุงููุฐุงูุฑุฉ ุฃู ุงูุจุฑุงูุฌ ุงูุชุฏุฑูุจูุฉ', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-12', name: 'ุนุฏู ุงูุชููุฏ ุจุฅุฌุฑุงุกุงุช ุงูููุงูุฉ ูุงูุณูุงูุฉ', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-13', name: 'ุนุฏู ุงููููู ุจุงูููุงูู ุงููุฎุตุตุฉ ููุฏูุฑุฉ', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-14', name: 'ุชุฌุงูุฒ ุงูุทูุงุจูุฑ ุงูุนุณูุฑูุฉ', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-15', name: 'ุงุณุชุฎุฏุงู ุงููุงุชู ุฃู ุงูุฃุฌูุฒุฉ ุงูุงููุชุฑูููุฉ ูู ุงูุฃููุงุช ุบูุฑ ุงููุตุฑุญ ุจูุง', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
          { id: 's2-16', name: 'ุนุฏู ุงูุงูุชุฒุงู ุจุงูุฃูุงูุฑ ูุงูุชุนูููุงุช', penalty: 'ุญุฌุฒ (6) ุณุงุนุงุช', deduction: 1 },
        ]
      },
      {
        id: 's3',
        name: 'ูุฎุงููุงุช ุงูุฏุฑุฌุฉ ุงูุซุงูุซุฉ',
        items: [
          { id: 's3-1', name: 'ุนุฏู ุงุฑุชุฏุงุก ุงูุฑุชุจ ุฃู ุงูุดุงุฑุงุช ูุบุทุงุก ุงูุฑุฃุณ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-2', name: 'ูุฎุงููุฉ ุฃูุธูุฉ ูุชุนูููุงุช ุงููุจุงุณ ุงูููุฑุฑ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-3', name: 'ุงูุชูุงุฒุญ ูุน ุงูุฒููุงุก', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-4', name: 'ุฅุญุฏุงุซ ุงูุถูุถุงุก ูุงูุฅุฒุนุงุฌ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-5', name: 'ุฅุฎุฑุงุฌ ุงูุฃุทุนูุฉ ูุงููุดุฑูุจุงุช ูู ูุทุนู ุงููุชุฏุฑุจูู ุฅูู ุงูุซููุฉ ูุงูุฃูุงูู ุบูุฑ ุงููุฎุตุตุฉ ููุฃูู ุจุฏูู ุฅุฐู', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-6', name: 'ุณูุก ุงุณุชุฎุฏุงู ุงูุตูุงุญูุงุช ูู ุงูุฑุชุจ ุงูููุงุฏูุฉ ูู ุงููุชุฏุฑุจูู', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-7', name: 'ุชุฑู ุฃู ูููุงุช ุนุณูุฑูุฉ ุฃู ุดุฎุตูุฉ ูู ูุงุนุงุช ุงูุฏุฑุงุณุฉ ุฃู ููุงุฏูู ุงูุชุฏุฑูุจ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-8', name: 'ุนุฏู ุงููุจุงูุงุฉุ ููุถุน ุงูุงูุฏู ูู ุงูุฌููุจ ุฃู ุชุดุงุจููุง ุฃุซูุงุก ุงููุณูุฑ ุฃู ุงุซูุงุก ุงูุชูุงุฌุฏ ูู ุงูููุงุฏูู ูุงููุงุนุงุช ุงูุฏุฑุงุณูุฉ ูุงูููุงุชุจ ูุงูููุฑุงุช', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-9', name: 'ุนุฏู ุงูุณูุทุฑุฉ ูู ุงูุฑุชุจ ุงูููุงุฏูุฉ ุนูู ูู ูู ูู ุฅูุฑุชู', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-10', name: 'ูุฌุงุฏูุฉ ุงูุฑุชุจ ุงูููุงุฏูุฉ ูู ุฒููุงุฆู', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-11', name: 'ุนุฏู ุงูุฅุจูุงุบ ุนู ุงููุชุบูุจูู ูู ูุจู ุงูุฑุชุจ ุงูููุงุฏูุฉ ูู ุฒููุงุฆู', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-12', name: 'ุงูุชูุงุฌุฏ ูู ุฃูุงูู ุบูุฑ ูุตุฑุญ ุจุงูุชูุงุฌุฏ ูููุง ุฃู ูู ุบูุฑ ุงูุฃููุงุช ุงูููุฑุฑุฉ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-13', name: 'ุฅุฏุฎุงู ุงู ุงุฑุชุฏุงุก ูููุงุช ุฃู ููุงุจุณ ุบูุฑ ููุฑุฑ ุงุฑุชุฏุงุฆูุง ุฏุงุฎู ุงููุนูุฏ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-14', name: 'ุนุฏู ุชูููุฐ ููุจุฉ ุงูููู ุจุงูููุช ุงููุญุฏุฏ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-15', name: 'ุงูุฅููุงู ูู ุงููุธุงูุฉ ูุชุฑุชูุจ ุงูุซููุฉ ุฃู ุงูููุงุจุณ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-16', name: 'ุงูุชูุงุณู ูู ุงูุทุงุจูุฑ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-17', name: 'ุงูุญุฑูุฉ ุฃู ุนุฏู ุงูุงูุชุธุงู ูู ุงูุทุงุจูุฑ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-18', name: 'ุงูุชุฃุฎูุฑ ูู ุชูุฏูู ุฃูุฑุงู ุฑุณููุฉ ูุทููุจุฉ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-19', name: 'ุนุฏู ุชุซุจูุช ุงููููุฉ ุงููุณุชููุฉ ูู ุงูุฃููุงุช ุงููุญุฏุฏุฉ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-20', name: 'ุนุฏู ุฅุจุฑุงุฒ ุงููููุฉ ุงูุดุฎุตูุฉ ุนูุฏ ุงูุทูุจ', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-21', name: 'ุฅุบูุงู ุฃุจูุงุจ ุงูุซููุฉ ุนูุฏ ุงูููู', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-22', name: 'ุงูุชุฃุฎูุฑ ุนู ููุนุฏ ุจุฏุก ุงูุทุงุจูุฑ ุงูุชุฏุฑูุจู', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-23', name: 'ุนุฏู ุงูุงุนุชูุงุก ุจุงููุธูุฑ ุงู ุงูููุฏุงู', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
          { id: 's3-24', name: 'ุทูุจ ุงูุนูุงุฏุฉ ูู ุงูุฃููุงุช ุงูุบูุฑ ูุญุฏุฏุฉ ููุง', penalty: 'ุญุฌุฒ (3) ุณุงุนุงุช', deduction: 0.5 },
        ]
      },
      {
        id: 'absent-lateness',
        name: 'ูุฎุงููุงุช ุงูุชุฃุฎูุฑ ูุงูุบูุงุจ',
        items: [
          { id: 'al-1', name: 'ุชุฃุฎูุฑ: ูู ุฏูููุฉ - ุฃูู ูู ูุตู ุณุงุนุฉ', penalty: 'ุญุฌุฒ 1 ุณุงุนุฉ', deduction: 0.25 },
          { id: 'al-2', name: 'ุชุฃุฎูุฑ: ูู ูุตู ุณุงุนุฉ - ุฃูู ูู ุณุงุนุฉ', penalty: 'ุญุฌุฒ 2 ุณุงุนุฉ', deduction: 0.5 },
          { id: 'al-3', name: 'ุชุฃุฎูุฑ: ูู ุณุงุนุฉ - ุฃูู ูู ุณุงุนุฉ ููุตู', penalty: 'ุญุฌุฒ 3 ุณุงุนุงุช', deduction: 0.75 },
          { id: 'al-4', name: 'ุชุฃุฎูุฑ: ูู ุณุงุนุฉ ููุตู - ุฃูู ุณุงุนุชูู', penalty: 'ุญุฌุฒ 4 ุณุงุนุงุช', deduction: 1 },
          { id: 'al-5', name: 'ุชุฃุฎูุฑ: ูู ุณุงุนุชูู - ุฃูู ูู ุณุงุนุชูู ููุตู', penalty: 'ุญุฌุฒ 5 ุณุงุนุงุช', deduction: 1.25 },
          { id: 'al-6', name: 'ุชุฃุฎูุฑ: ูู ุณุงุนุชูู ููุตู - ุฃูู ูู 3 ุณุงุนุงุช', penalty: 'ุญุฌุฒ 6 ุณุงุนุงุช', deduction: 1.5 },
          { id: 'al-7', name: 'ุชุฃุฎูุฑ: ูู 3 ุณุงุนุงุช ูุฃุนูู', penalty: 'ุญุฌุฒ 7 ุณุงุนุงุช', deduction: 2 },
          { id: 'al-8', name: 'ุบูุงุจ ููู ุจุฏูู ุนุฐุฑ', penalty: 'ุญุฌุฒ 9 ุณุงุนุงุช', deduction: 2 },
        ]
      }
    ]
  }
]);
  // ุงูุตูุงุญูุงุช
  const MILITARY_STANDARDS_ROLES = ["owner", "manager", "admin"];
  const STANDARDS_ACCESS_ROLES = ["owner", "manager", "admin", "assistant_admin", "sports_officer"];
const fetchDisciplinaryRegulations = async () => {
    try {
        const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/settings/disciplinary`, {
            headers: { "Authorization": `Bearer ${localStorage.getItem("token")}` }
        });
        if (res.ok) {
            const data = await res.json();
            // ููุงุญุธุฉ: ููุง ูุญุชุงุฌ ูุฅุนุงุฏุฉ ุจูุงุก ุงููููู ุงููุชุฏุงุฎู ุฅุฐุง ูุงูุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุชุนูุฏูุง ูุณุทุญุฉ
            // ููู ููุชุจุณูุท ุงูุขูุ ููููู ุงูุงุนุชูุงุฏ ุนูู ุงูุจูุงูุงุช ุงูุงูุชุฑุงุถูุฉ ูุญูู ุจุฑูุฌุฉ "ุฅุนุงุฏุฉ ุงูููููุฉ"
        }
    } catch (e) { console.error("Error fetching regulations"); }
};
  useEffect(() => {
    const user = JSON.parse(localStorage.getItem("user") || "{}")
    setUserRole(user.role || null)
    setMounted(true)
    
    // ุฌูุจ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ ูู ุงูุจุงู ุฅูุฏ
    fetchSettings()
    fetchMilitaryConfigs();
    fetchEngagementConfigs();
    fetchTrainingTemplates();
    fetchDisciplinaryRegulations(); // ๐ ุฃุถู ูุฐุง ุงูุณุทุฑ ููุง ููุท
    
    try {
        const userStr = localStorage.getItem("user");
        if (userStr) {
            const user = JSON.parse(userStr);
            const milId = user.military_id;
            setUserMilId(milId);
            checkSavedSignature(milId);
        }
    } catch (e) { }
}, [])
useEffect(() => {
    const fetchFilters = async () => {
        try {
            const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/soldiers/filters-options`);
            if (res.ok) setFilterOptions(await res.json());
        } catch (e) { console.error("Error fetching filters") }
    }
    fetchFilters();
  }, []);
  const canManageMilitaryStandards = MILITARY_STANDARDS_ROLES.includes(userRole || "");
  const canAccessStandards = STANDARDS_ACCESS_ROLES.includes(userRole || "");
  const isDark = theme === 'dark';
const fetchTrainingTemplates = async () => {
  try {
    const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/training/templates`, {
      headers: { "Authorization": `Bearer ${localStorage.getItem("token")}` }
    });
    if (res.ok) {
      const data = await res.json();
      setTrainingTemplates(data);
      if (data.length > 0 && !activeTemplateId) {
        setActiveTemplateId(data[0].id);
      }
    }
  } catch (e) {
    console.error("Error fetching templates");
  }
};
  // --- ๐ก ุงูุฑุจุท ูุน ุงูุจุงู ุฅูุฏ: ุงููุนุงููุฑ ุงูุนุณูุฑูุฉ ---

  const fetchMilitaryConfigs = async () => {
    try {
      const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/exams/configs`, {
        headers: { "Authorization": `Bearer ${localStorage.getItem("token")}` }
      });
      if (res.ok) {
        const configs = await res.json();
        setMilitaryData(prev => prev.map(branch => ({
          ...branch,
          tests: configs
            .filter((c: any) => c.subject === branch.id)
            .map((c: any) => ({ id: c.id.toString(), name: c.exam_type, criteria: c.criteria }))
        })));
      }
    } catch (e) { console.error("Error fetching configs"); }
  };

  const saveMilitaryConfigs = async () => {
    setLoading(true);
    try {
      const allConfigs: any[] = [];
      militaryData.forEach(branch => {
        branch.tests.forEach(test => {
          allConfigs.push({
            subject: branch.id,
            exam_type: test.name,
            criteria: test.criteria,
            is_active: true
          });
        });
      });

      for (const config of allConfigs) {
        await fetch(`${process.env.NEXT_PUBLIC_API_URL}/exams/configs`, {
          method: "POST",
          headers: { 
            "Content-Type": "application/json",
            "Authorization": `Bearer ${localStorage.getItem("token")}` 
          },
          body: JSON.stringify(config),
        });
      }
      toast.success("ุชู ุญูุธ ูุนุงููุฑ ุงูุชุฏุฑูุจ ุงูุนุณูุฑู ุจูุฌุงุญ");
    } catch (e) { toast.error("ูุดู ุญูุธ ุงููุนุงููุฑ ุงูุนุณูุฑูุฉ"); } 
    finally { setLoading(false); }
  };
// ๐ ุฏุงูุฉ ุญูุธ ูุนุงููุฑ ุงูุงุดุชุจุงู ุงูุฌุฏูุฏุฉ
const saveEngagementConfigs = async () => {
  setLoading(true);
  try {
    // ูููู ุจุฅุฑุณุงู ุงูุจูุงูุงุช ููุง ูู ููุฌูุฏุฉ ูู ุงูู State
    const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/exams/engagement-configs`, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": `Bearer ${localStorage.getItem("token")}`
      },
      body: JSON.stringify(engagementData) 
    });

    if (res.ok) {
      toast.success("ุชู ุญูุธ ูุนุงููุฑ ุงูุงุดุชุจุงู ุจูุฌุงุญ");
      await fetchEngagementConfigs(); // ุชุญุฏูุซ ุงููุงุฌูุฉ ูุฌุฏุฏุงู
    } else {
      toast.error("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญูุธ ุงููุนุงููุฑ");
    }
  } catch (e) {
    toast.error("ูุดู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ");
  } finally {
    setLoading(false);
  }
};
  // --- ุฏูุงู ุงูุชุญูู ูู ุงููุงุฌูุฉ (ุงููุนุงููุฑ) ---

  const addMilitaryTest = (branchId: string) => {
    const newTest: MilitaryTest = {
      id: `test-${Date.now()}`,
      name: 'ุงุฎุชุจุงุฑ ุฌุฏูุฏ',
      criteria: [{ id: `crit-${Date.now()}`, name: 'ูุนูุงุฑ 1', max: 10 }]
    };
    setMilitaryData(prev => prev.map(b => b.id === branchId ? { ...b, tests: [...b.tests, newTest] } : b));
  };

  const deleteMilitaryTest = (branchId: string, testId: string) => {
  // ุฅุฐุง ูุงู ุงูุงุฎุชุจุงุฑ ูุญููุธุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ID ุฑููู)
  if (!testId.startsWith('test-') && !testId.startsWith('temp-')) {
    setTestToDelete({ branchId, testId });
    setIsDeleteDialogOpen(true); // ููุชุญ ูุงูุฐุฉ ุงูุชุฃููุฏ ุงูุฌูููุฉ
  } else {
    // ุฅุฐุง ูุงู ุงุฎุชุจุงุฑุงู ุฌุฏูุฏุงู ูู ููุญูุธ ุจุนุฏุ ูุญุฐูู ููุฑุงู ูู ุงููุงุฌูุฉ
    setMilitaryData(prev => prev.map(b => 
      b.id === branchId ? { ...b, tests: b.tests.filter(t => t.id !== testId) } : b
    ));
  }
};

const confirmPermanentDelete = async () => {
  if (!testToDelete) return;
  
  setLoading(true);
  try {
    const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/exams/configs/${testToDelete.testId}`, {
      method: "DELETE",
      headers: { "Authorization": `Bearer ${localStorage.getItem("token")}` }
    });

    if (res.ok) {
      toast.success("ุชู ุญุฐู ุงูุงุฎุชุจุงุฑ ูู ุงูุณุฌูุงุช ููุงุฆูุงู");
      // ูุณุญู ูู ุงููุงุฌูุฉ
      setMilitaryData(prev => prev.map(b => 
        b.id === testToDelete.branchId ? { ...b, tests: b.tests.filter(t => t.id !== testToDelete.testId) } : b
      ));
    } else {
      toast.error("ูุดู ุงูุญุฐู ูู ุงูุณูุฑูุฑ");
    }
  } finally {
    setLoading(false);
    setIsDeleteDialogOpen(false);
    setTestToDelete(null);
  }
};
  const updateTestName = (branchId: string, testId: string, newName: string) => {
    setMilitaryData(prev => prev.map(b => b.id === branchId ? { ...b, tests: b.tests.map(t => t.id === testId ? { ...t, name: newName } : t) } : b));
  };

  const addCriterion = (branchId: string, testId: string) => {
    setMilitaryData(prev => prev.map(b => b.id === branchId ? { ...b, tests: b.tests.map(t => t.id === testId ? { ...t, criteria: [...t.criteria, { id: `c-${Date.now()}`, name: '', max: 0 }] } : t) } : b));
  };

  const updateCriterion = (branchId: string, testId: string, critId: string, field: 'name' | 'max', value: any) => {
    setMilitaryData(prev => prev.map(b => b.id === branchId ? { ...b, tests: b.tests.map(t => t.id === testId ? { ...t, criteria: t.criteria.map(c => c.id === critId ? { ...c, [field]: field === 'max' ? Number(value) : value } : c) } : t) } : b));
  };

  const deleteCriterion = (branchId: string, testId: string, critId: string) => {
    setMilitaryData(prev => prev.map(b => b.id === branchId ? { ...b, tests: b.tests.map(t => t.id === testId ? { ...t, criteria: t.criteria.filter(c => c.id !== critId) } : t) } : b));
  };
// ๐ ุฏูุงู ุงูุงุดุชุจุงู
const fetchEngagementConfigs = async () => {
  try {
    const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/exams/engagement-configs`, {
      headers: { "Authorization": `Bearer ${localStorage.getItem("token")}` }
    });
    if (res.ok) {
      const data = await res.json();
      if (data && Array.isArray(data) && data.length > 0) {
        // ๐ข ุงูุชุนุฏูู: ุชุฑุชูุจ ุงูุชุจููุจุงุช ูุฏููุงู ูุถูุงู ุจูุงุก "ุงูููู" ูุฃูู ุนูุตุฑ
        const fixedOrder = data.sort((a: any, b: any) => {
          if (a.key === 'technical') return -1;
          if (b.key === 'technical') return 1;
          return 0;
        });

        const formattedData = fixedOrder.map((item: any) => ({
          ...item,
          id: item.key 
        }));
        setEngagementData(formattedData);
      }
    }
  } catch (e) { 
    console.error("Error fetching engagement configs", e); 
  }
};
const addEngagementAxis = (tabId: string) => {
  const newAxis: EngagementAxis = {
    id: `axis-${Date.now()}`,
    name: 'ูุญูุฑ ุฌุฏูุฏ',
    is_active: true, // ุงูุญุงูุฉ ุงููุดุทุฉ ุงูุชุฑุงุถูุงู
    criteria: [{ id: `crit-${Date.now()}`, name: 'ูุนูุงุฑ 1', max: 0, stations: [] }] 
  };
  
  // ูุญุฏุซ ุงูุจูุงูุงุช ูุน ุงูุญูุงุธ ุนูู ุชุฑุชูุจ ุงูุชุจููุจุงุช ุงูุญุงูู
  setEngagementData(prev => prev.map(t => 
    t.id === tabId ? { ...t, axes: [...t.axes, newAxis] } : t
  ));
};

const updateAxisName = (tabId: string, axisId: string, newName: string) => {
  setEngagementData(prev => prev.map(t => t.id === tabId ? { ...t, axes: t.axes.map(a => a.id === axisId ? { ...a, name: newName } : a) } : t));
};

const addEngCriterion = (tabId: string, axisId: string) => {
  setEngagementData(prev => prev.map(t => t.id === tabId ? { 
    ...t, 
    axes: t.axes.map(a => a.id === axisId ? { 
      ...a, 
      // ๐๏ธ ุชุฃูุฏ ุฃู stations ููุง ูุตูููุฉ []
      criteria: [...a.criteria, { id: `ec-${Date.now()}`, name: '', max: 0, stations: [] }] 
    } : a) 
  } : t));
};

const updateEngCriterion = (tabId: string, axisId: string, critId: string, field: keyof EngagementCriterion, value: any) => {
  setEngagementData(prev => prev.map(t => t.id === tabId ? { ...t, axes: t.axes.map(a => a.id === axisId ? { ...a, criteria: a.criteria.map(c => c.id === critId ? { ...c, [field]: field === 'max' ? Number(value) : value } : c) } : a) } : t));
};

const deleteEngAxis = (tabId: string, axisId: string) => {
  setEngagementData(prev => prev.map(t => t.id === tabId ? { ...t, axes: t.axes.filter(a => a.id !== axisId) } : t));
};

// ๐ ุฅุถุงูุฉ ูุญุทุฉ ุฌุฏูุฏุฉ ูุงุฑุบุฉ ููุนูุงุฑ ูุญุฏุฏ
const addStationToCriterion = (tabId: string, axisId: string, critId: string) => {
  setEngagementData(prev => prev.map(t => t.id === tabId ? {
    ...t, axes: t.axes.map(a => a.id === axisId ? {
      ...a, criteria: a.criteria.map(c => c.id === critId ? {
        ...c, stations: [...c.stations, ""] // ุฅุถุงูุฉ ุนูุตุฑ ูุงุฑุบ ูููุตูููุฉ
      } : c)
    } : a)
  } : t));
};

// ๐ ุชุญุฏูุซ ูุต ูุญุทุฉ ูุนููุฉ
const updateStationText = (tabId: string, axisId: string, critId: string, sIdx: number, value: string) => {
  setEngagementData(prev => prev.map(t => t.id === tabId ? {
    ...t, axes: t.axes.map(a => a.id === axisId ? {
      ...a, criteria: a.criteria.map(c => c.id === critId ? {
        ...c, stations: c.stations.map((s, i) => i === sIdx ? value : s)
      } : c)
    } : a)
  } : t));
};

// ๐ ุญุฐู ูุญุทุฉ ูุนููุฉ
const deleteStation = (tabId: string, axisId: string, critId: string, sIdx: number) => {
  setEngagementData(prev => prev.map(t => t.id === tabId ? {
    ...t, axes: t.axes.map(a => a.id === axisId ? {
      ...a, criteria: a.criteria.map(c => c.id === critId ? {
        ...c, stations: c.stations.filter((_, i) => i !== sIdx)
      } : c)
    } : a)
  } : t));
};
  // --- ๐ ุงูุฑุจุท ูุน ุงูุจุงู ุฅูุฏ: ุงูุฃูุงู ูุงูุชูููุน ---

  const handlePasswordChange = async () => {
    if (!currentPassword || !newPassword || !confirmPassword) return toast.error("ูุฑุฌู ููุก ูุงูุฉ ุงูุญููู");
    if (newPassword !== confirmPassword) return toast.error("ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ ุบูุฑ ูุชุทุงุจูุฉ");
    
    setIsUpdatingPassword(true);
    try {
      const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/settings/change-password`, {
        method: "POST",
        headers: { 
            "Content-Type": "application/json", 
            "Authorization": `Bearer ${localStorage.getItem("token")}` 
        },
        body: JSON.stringify({ current_password: currentPassword, new_password: newPassword })
      });
      
      const data = await res.json();
      if (res.ok) {
        toast.success("ุชู ุชุญุฏูุซ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ");
        setCurrentPassword(""); setNewPassword(""); setConfirmPassword("");
      } else {
        toast.error(data.detail || "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุชุญุฏูุซ");
      }
    } catch (e) { toast.error("ูุดู ุงูุงุชุตุงู ุจุงูุฎุงุฏู"); } 
    finally { setIsUpdatingPassword(false); }
  };

  const saveSettings = async () => {
    setLoading(true)
    try {
      const payload = { 
          ...calcSettings, 
          distance: parseInt(calcSettings.distance), 
          pass_rate: Number(calcSettings.pass_rate), 
          base_score: Number(calcSettings.base_score), 
          rows_per_page: parseInt(calcSettings.rows_per_page) 
      }
      const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/settings`, { 
          method: "POST", 
          headers: { 
              "Content-Type": "application/json",
              // ๐ก๏ธ ุฅุถุงูุฉ ุงูุญูุงูุฉ ูุถูุงู ุนุฏู ุชูุงุนุจ ุฃู ูุณุชุฎุฏู ุจูุนุงููุฑ ุงููุฌุงุญ ูุงูุฑุณูุจ
              "Authorization": `Bearer ${localStorage.getItem("token")}`
          }, 
          body: JSON.stringify(payload) 
      })
      if (res.ok) toast.success("ุชู ุญูุธ ุงูุชูุถููุงุช ูุงูุฑูุงุถู ุจูุฌุงุญ")
      else toast.error("ูุดู ุญูุธ ุงูุฅุนุฏุงุฏุงุชุ ุฑุจูุง ูุง ุชููู ุงูุตูุงุญูุฉ ุงููุงููุฉ")
    } catch (e) {
      toast.error("ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูุณูุฑูุฑ")
    } finally { setLoading(false) }
}

  const saveSignature = async () => {
    // 1. ุงูุชุญูู ูู ุฃู ุงูููุญุฉ ููุณุช ูุงุฑุบุฉ
    if (sigPad.current.isEmpty()) return toast.warning("ุงุฑุณู ุงูุชูููุน ุฃููุงู");
    
    setLoading(true);
    
    const canvas = sigPad.current.getCanvas();
    
    // 2. ุชุญููู ุงูุฑุณู ุฅูู ููู ุตูุฑุฉ
    canvas.toBlob(async (blob: any) => {
        const formData = new FormData();
        formData.append('file', blob, 'signature.png');
        formData.append('military_id', userMilId!); 
        
        try {
            // 3. ุงูุฅุฑุณุงู ุฅูู ุงูุจุงู ุฅูุฏ
            const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/settings/upload-signature`, { 
                method: "POST", 
                // ๐ก๏ธ ุฅุถุงูุฉ ุงูุญูุงูุฉ ููุง ูุฑุจุท ุนูููุฉ ุงูุฑูุน ุจูููุชู ุงูุญููููุฉ
                headers: {
                    "Authorization": `Bearer ${localStorage.getItem("token")}`
                },
                body: formData 
            });

            if (res.ok) { 
                toast.success("ุชู ุญูุธ ุงูุชูููุน ุจูุฌุงุญ"); 
                // ๐ข 4. ุชุญุฏูุซ ุฑุงุจุท ุงูุตูุฑุฉ ููุฑุงู ูุฅุธูุงุฑ ุงูุชูููุน ุงูุฌุฏูุฏ
                checkSavedSignature(userMilId!); 
            } else {
                const err = await res.json();
                toast.error(err.detail || "ูุดู ุญูุธ ุงูุชูููุน");
            }
        } catch (e) {
            toast.error("ุฎุทุฃ ูู ุงูุงุชุตุงู ุจุงูุฎุงุฏู");
        } finally {
            setLoading(false);
        }
    });
}

 const checkSavedSignature = (milId: string | null) => {
    if (!milId) return;
    // ุฑุงุจุท ุงููุดุฑูุน ุงูุฎุงุต ุจู
    const supabaseUrl = "https://cynkoossuwenqxksbdhi.supabase.co";
    // ุฑุงุจุท ุงูุตูุฑุฉ ุงูุงูุชุฑุงุถู (PNG)
    const url = `${supabaseUrl}/storage/v1/object/public/Signatures/${milId}.png`;
    
    // ูุถูู ููุช ุนุดูุงุฆู ููุฑุงุจุท ูุฅุฌุจุงุฑ ุงููุชุตูุญ ุนูู ุชุญุฏูุซ ุงูุตูุฑุฉ ููุฑุงู ุจุนุฏ ุงูุญูุธ
    setSavedSignature(`${url}?t=${new Date().getTime()}`);
  }

  const fetchSettings = async () => {
    try {
      const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/settings`)
      if (res.ok) {
        const data = await res.json()
        setCalcSettings({ ...data, distance: data.distance.toString(), rows_per_page: (data.rows_per_page || 10).toString() })
      }
    } catch (error) { }
  }

 const deleteSignature = async () => {
    if(!userMilId) return;
    
    setLoading(true);
    try {
        const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/settings/delete-signature/${userMilId}`, { 
            method: "DELETE",
            // ๐ก๏ธ ุฅุถุงูุฉ ุงูุญูุงูุฉ ููุง ูุถูุงู ุฃู ุตุงุญุจ ุงูุชูููุน ุฃู ุงููุฏูุฑ ููุท ูู ูู ูุญุฐู
            headers: {
                "Authorization": `Bearer ${localStorage.getItem("token")}`
            }
        });
        
        if (res.ok) {
            setSavedSignature(null); 
            sigPad.current.clear(); 
            toast.success("ุชู ุญุฐู ุงูุชูููุน"); 
        } else {
            toast.error("ูุดู ุงูุญุฐู");
        }
    } catch (e) {
        toast.error("ุฎุทุฃ ูู ุงูุงุชุตุงู");
    } finally {
        setLoading(false);
    }
}
const createNewTemplate = () => {
    const newTemplate: TrainingTemplate = {
      id: `temp-${Date.now()}`,
      name: 'ุฌุฏูู ุชุฏุฑูุจู ุฌุฏูุฏ',
      courseId: '',
      batchId: '',
      isActive: false,
      schedule: weekDays.map(day => ({
        dayName: day,
        sessions: Array.from({ length: 5 }).map((_, i) => ({ // ุงูุชุฑุงุถูุงู 5 ุญุตุต
          id: `sess-${day}-${i}-${Date.now()}`,
          name: '',
          type: 'other',
          startTime: '00:00',
          endTime: '00:00'
        }))
      }))
    };
    setTrainingTemplates([...trainingTemplates, newTemplate]);
    setActiveTemplateId(newTemplate.id);
    setIsEditingTemplate(true);
  };

  // ๐ ุชุญุฏูุซ ุจูุงูุงุช ุญุตุฉ ูุนููุฉ
  const updateSession = (templateId: string, dayName: string, sessIdx: number, field: keyof TrainingSession, value: string) => {
    setTrainingTemplates(prev => prev.map(t => {
      if (t.id !== templateId) return t;
      return {
        ...t,
        schedule: t.schedule.map(d => {
          if (d.dayName !== dayName) return d;
          const newSessions = [...d.sessions];
          newSessions[sessIdx] = { ...newSessions[sessIdx], [field]: value };
          return { ...d, sessions: newSessions };
        })
      };
    }));
  };

  // ๐ ุญูุธ ุงูููุงูุจ (ูุญุงูุงุฉ ุงุชุตุงู ุจุงูุจุงู ุฅูุฏ)
  
  // ๐ ุฏุงูุฉ ุฅุถุงูุฉ ุนููุฏ ุญุตุฉ ุฌุฏูุฏ ููู ุงูุฃูุงู
  const addSessionColumn = (templateId: string) => {
    setTrainingTemplates(prev => prev.map(t => {
      if (t.id !== templateId) return t;
      
      // ูุญุฏุฏ ุฑูู ุงูุญุตุฉ ุงูุฌุฏูุฏุฉ ุจูุงุกู ุนูู ุนุฏุฏ ุงูุญุตุต ูู ุฃูู ููู
      const newSessionIndex = t.schedule[0].sessions.length;

      return {
        ...t,
        schedule: t.schedule.map(day => ({
          ...day,
          // ูุถูู ุญุตุฉ ุฌุฏูุฏุฉ ูููุงูุฉ ูุตูููุฉ ุงูุญุตุต ููุฐุง ุงูููู
          sessions: [...day.sessions, {
            id: `sess-${day.dayName}-${newSessionIndex}-${Date.now()}`,
            name: '',
            type: 'other',
            startTime: '00:00',
            endTime: '00:00'
          }]
        }))
      };
    }));
  };

  // ๐ ุฏุงูุฉ ุฅุถุงูุฉ ููู ุฌุฏูุฏ (ุงูุฌูุนุฉ/ุงูุณุจุช)
  const addDayRow = (templateId: string) => {
    setTrainingTemplates(prev => prev.map(t => {
      if (t.id !== templateId) return t;

      const currentDays = t.schedule.map(d => d.dayName);
      let nextDay = "";
      
      // ุชุญุฏูุฏ ุงูููู ุงูุชุงูู ุชููุงุฆูุงู
      if (!currentDays.includes("ุงูุฌูุนุฉ")) nextDay = "ุงูุฌูุนุฉ";
      else if (!currentDays.includes("ุงูุณุจุช")) nextDay = "ุงูุณุจุช";
      else {
        toast.info("ุชู ุฅุถุงูุฉ ูุงูุฉ ุฃูุงู ุงูุฃุณุจูุน ุจุงููุนู");
        return t;
      }

      // ุนุฏุฏ ุงูุญุตุต ูุฌุจ ุฃู ูุทุงุจู ุงูุฃูุงู ุงูููุฌูุฏุฉ
      const sessionCount = t.schedule[0].sessions.length;

      return {
        ...t,
        schedule: [...t.schedule, {
          dayName: nextDay,
          sessions: Array.from({ length: sessionCount }).map((_, i) => ({
            id: `sess-${nextDay}-${i}-${Date.now()}`,
            name: '',
            type: 'other',
            startTime: '00:00',
            endTime: '00:00'
          }))
        }]
      };
    }));
  };

  // ๐ ุฏุงูุฉ ุงูุญูุธ ูุน ุงูุชุญูู ุงูุฅูุฒุงูู
 const saveTrainingTemplates = async () => {
    const currentTemplate = trainingTemplates.find(t => t.id === activeTemplateId);
    
    if (!currentTemplate?.courseId) {
        toast.error("ูุฑุฌู ุงุฎุชูุงุฑ ุงูุฏูุฑุฉ ุฃููุงู");
        return;
    }

    // ๐ข ุงูุญู ุงูุฐูู: ุงูุชุญูู ูู ุงูุฏูุฑุฉ ุงููุฎุชุงุฑุฉ "ูุนููุงู" ุชููู ุฏูุนุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุชุ
    // ุณูููู ุจุชุตููุฉ ูุงุฆูุฉ ุงูุฏูุนุงุช ุงูุนุงูููุฉ ููุฑู ูู ููุฌุฏ ูููุง ูุง ูุฎุต ูุฐู ุงูุฏูุฑุฉ
    // ููุงุญุธุฉ: ุจูุง ุฃู filterOptions.batches ูุงุฆูุฉ ูุณุทุญุฉุ ุณูุณูุญ ุจุงูุญูุธ ุฅุฐุง ูู ูุฎุชุฑ ุงููุณุชุฎุฏู ุฏูุนุฉ 
    // ุฅูุง ุฅุฐุง ูุงูุช ุงูุฏูุฑุฉ ูุดููุฑุฉ ุจูุฌูุฏ ุฏูุนุงุช (ูุซู ุงููุณุชุฌุฏูู ูุงูุฏุจููู)
    
    const isSpecificCourseWithBatches = ["ุดุฑุทุฉ ูุณุชุฌุฏูู", "ุทูุจุฉ ุงูุฏุจููู"].some(c => 
        currentTemplate.courseId.includes(c)
    );

    // ุฅุฐุง ูุงูุช ุฏูุฑุฉ ูุณุชุฌุฏูู ุฃู ุฏุจููู ููู ูุญุฏุฏ ุงูุฏูุนุฉ -> ูููุนู
    // ุฃูุง ุงูุฏูุฑุงุช ุงูุฃุฎุฑู (ุชุฎุตุตูุฉ/ุญุชููุฉ) ูุณูุญ ูู ุจุงูุญูุธ ุญุชู ูู ุงูุฏูุนุฉ ูุงุฑุบุฉ
    if (isSpecificCourseWithBatches && !currentTemplate.batchId) {
        toast.error("ุชูุจูู: ุฏูุฑุงุช ุงููุณุชุฌุฏูู ูุงูุฏุจููู ุชุชุทูุจ ุชุญุฏูุฏ ุงูุฏูุนุฉ", {
            icon: <AlertTriangle className="text-orange-500" />
        });
        return;
    }

    setLoading(true);

    const isNew = currentTemplate.id.startsWith('temp-');
    const actionText = isNew ? "ุฅูุดุงุก ุฌุฏูู ุฌุฏูุฏ" : "ุชุญุฏูุซ ุจูุงูุงุช ุงูุฌุฏูู";
    
    // ๐ข ุชุนุฏูู ุนุฑุถ ุงููุนูููุงุช: ุฅุฐุง ูุง ุชูุฌุฏ ุฏูุนุฉุ ูุง ูุธูุฑ ูููุฉ "ุฏูุนุฉ ูุงุฑุบุฉ"
    const batchInfo = currentTemplate.batchId ? ` - ุฏูุนุฉ ${currentTemplate.batchId}` : " (ุฏูุฑุฉ ุจุฏูู ุฏูุนุฉ)";
    const courseInfo = `${currentTemplate.courseId}${batchInfo}`;

    const savePromise = fetch(`${process.env.NEXT_PUBLIC_API_URL}/training/templates/save`, {
        method: "POST",
        headers: { 
            "Content-Type": "application/json",
            "Authorization": `Bearer ${localStorage.getItem("token")}`
        },
        body: JSON.stringify(currentTemplate)
    }).then(async (res) => {
        if (!res.ok) throw new Error();
        const result = await res.json();
        await fetchTrainingTemplates(); 
        setIsEditingTemplate(false);
        return result;
    });

    toast.promise(savePromise, {
        loading: `ุฌุงุฑู ${actionText} ูู ${courseInfo}...`,
        success: () => `ุชู ุญูุธ ุงูุจุฑูุงูุฌ ูู ${courseInfo} ุจูุฌุงุญ โ`,
        error: () => `ุนุฐุฑุงูุ ุชุนุฐุฑ ุญูุธ ุงูุชุนุฏููุงุช ุนูู ุจุฑูุงูุฌ ${currentTemplate.courseId} โ`,
    });

    setLoading(false);
};
const handleDeleteTemplate = async (templateId: string) => {
    // ๐ก๏ธ ูุง ูุณูุญ ุจุญุฐู "id" ูุจุฏุฃ ุจู temp (ูู ูุญูุธ ุจุนุฏ) ูุจุงุดุฑุฉ ูู ุงููุงุฌูุฉ
    if (templateId.startsWith('temp-')) {
        setTrainingTemplates(prev => prev.filter(t => t.id !== templateId));
        toast.success("ุชู ุฅุฒุงูุฉ ุงููุณูุฏุฉ");
        return;
    }

    const deletePromise = fetch(`${process.env.NEXT_PUBLIC_API_URL}/training/templates/${templateId}`, {
        method: "DELETE",
        headers: { "Authorization": `Bearer ${localStorage.getItem("token")}` }
    }).then(async (res) => {
        if (!res.ok) throw new Error();
        await fetchTrainingTemplates();
        return res.json();
    });

    toast.promise(deletePromise, {
        loading: 'ุฌุงุฑู ุญุฐู ุงูุฌุฏูู ููุงุฆูุงู...',
        success: 'ุชู ุญุฐู ุงูุฌุฏูู ุจูุฌุงุญ ๐๏ธ',
        error: 'ูุดู ุงูุญุฐูุ ูุฏ ูููู ุงูุฌุฏูู ูุฑุชุจุทุงู ุจุณุฌูุงุช ุฃุฎุฑู โ',
    });
};
  const clearSignature = () => sigPad.current.clear()
// ๐ข ุญุฐู ุนููุฏ (ุญุตุฉ) ูุญุฏุฏ ูู ูุงูุฉ ุงูุฃูุงู
const removeSessionColumn = (templateId: string, sessIdx: number) => {
  setTrainingTemplates(prev => prev.map(t => {
    if (t.id !== templateId) return t;
    return {
      ...t,
      schedule: t.schedule.map(day => ({
        ...day,
        // ููุชุฑุฉ ุงูุญุตุต ูุงุณุชุจุนุงุฏ ุงูุญุตุฉ ุฐุงุช ุงูุชุฑุชูุจ ุงููุญุฏุฏ
        sessions: day.sessions.filter((_, i) => i !== sessIdx)
      }))
    };
  }));
  toast.info(`ุชู ุญุฐู ุงูุนููุฏ (ุงูุญุตุฉ ุฑูู ${sessIdx + 1})`);
};

// ๐ข ุญุฐู ููู (ุตู) ูุญุฏุฏ ูู ุงูุฌุฏูู
const removeDayRow = (templateId: string, dayName: string) => {
  setTrainingTemplates(prev => prev.map(t => {
    if (t.id !== templateId) return t;
    // ููุน ุญุฐู ูู ุงูุฃูุงู (ูุฌุจ ุจูุงุก ููู ูุงุญุฏ ุนูู ุงูุฃูู)
    if (t.schedule.length <= 1) {
      toast.error("ูุง ูููู ุญุฐู ูุงูุฉ ุงูุฃูุงูุ ูุฌุจ ุจูุงุก ููู ูุงุญุฏ ุนูู ุงูุฃูู");
      return t;
    }
    return {
      ...t,
      schedule: t.schedule.filter(day => day.dayName !== dayName)
    };
  }));
};
  if (!mounted) return null

  return (
    <ProtectedRoute allowedRoles={["owner", "manager", "admin", "assistant_admin", "sports_officer", "sports_supervisor", "sports_trainer","military_officer", "military_supervisor", "military_trainer"]}>
      <div className="max-w-6xl mx-auto pb-10 md:pb-24" dir="rtl"> {/* ุฒูุงุฏุฉ ุงูุนุฑุถ ูู max-w-6xl */}
        <Tabs defaultValue="security" className="w-full" dir="rtl">
          
          <div className="sticky top-0 z-50 bg-background/95 backdrop-blur-md pt-6 pb-4 border-b mb-6 px-2">
          <div className="flex items-center gap-3 mb-6">
            <div className="p-2 bg-slate-900 rounded-lg text-white"><Settings2 className="w-6 h-6" /></div>
            <h1 className="text-2xl font-bold">ุฅุนุฏุงุฏุงุช ุงููุธุงู</h1>
          </div>

          <TabsList className="grid w-full h-auto grid-cols-4 md:grid-cols-8 gap-2 bg-slate-200/50 p-1 rounded-xl">
    {["owner", "manager", "admin", "military_officer"].includes(userRole || "") && (
    <TabsTrigger value="mil-standards" className="text-[10px] md:text-xs py-2.5 data-[state=active]:bg-blue-600 data-[state=active]:text-white transition-all">
        ูุนุงููุฑ ุงูุนุณูุฑู
    </TabsTrigger>
)}
{["owner", "manager", "admin", "assistant_admin","sports_officer"].includes(userRole || "") && (
    <TabsTrigger value="standards" className="text-[10px] md:text-xs py-2.5 data-[state=active]:bg-green-600 data-[state=active]:text-white transition-all">
        ูุนุงููุฑ ุงูููุงูุฉ
    </TabsTrigger>
)}
{["owner", "manager", "admin","sports_officer"].includes(userRole || "") && (
    <TabsTrigger value="engagement" className="text-[10px] md:text-xs py-2.5 data-[state=active]:bg-orange-600 data-[state=active]:text-white transition-all">
        ูุนุงููุฑ ุงูุงุดุชุจุงู
    </TabsTrigger>
)}

    {["owner", "manager", "admin"].includes(userRole || "") && (
    <TabsTrigger value="disciplinary" className="text-[10px] md:text-xs py-2.5 data-[state=active]:bg-amber-700 data-[state=active]:text-white transition-all">
        ูุงุฆุญุฉ ุงููุฎุงููุงุช
    </TabsTrigger>
)}
{["owner", "manager", "admin"].includes(userRole || "") && (
    <TabsTrigger value="training-schedule" className="text-[10px] md:text-xs py-2.5 data-[state=active]:bg-amber-500 data-[state=active]:text-white transition-all">
        ุงูุจุฑูุงูุฌ ุงูุชุฏุฑูุจู
    </TabsTrigger>
    )}
    <TabsTrigger value="appearance" className="text-[10px] md:text-xs py-2.5 data-[state=active]:bg-cyan-700 data-[state=active]:text-white transition-all">
        ุงููุธูุฑ
    </TabsTrigger>

    <TabsTrigger value="signature" className="text-[10px] md:text-xs py-2.5 data-[state=active]:bg-purple-600 data-[state=active]:text-white transition-all">
        ุงูุชูููุน
    </TabsTrigger>

    <TabsTrigger value="security" className="text-[10px] md:text-xs py-2.5 data-[state=active]:bg-red-600 data-[state=active]:text-white transition-all">
        ุงูุฃูุงู
    </TabsTrigger>
</TabsList>
        </div>

        {/* ๐ต ุชุงุจ ูุนุงููุฑ ุงูุนุณูุฑู */}
        <TabsContent value="mil-standards">
          <Card className="border-t-4 border-t-blue-600 shadow-md">
            <CardHeader className="text-right pb-2">
              <CardTitle className="text-blue-700">ุฅุฏุงุฑุฉ ุงุฎุชุจุงุฑุงุช ุงูุชุฏุฑูุจ ุงูุนุณูุฑู</CardTitle>
            </CardHeader>
            <CardContent className="space-y-6">
              <Tabs value={activeMilTab} onValueChange={setActiveMilTab} className="w-full">
                <TabsList className="w-full grid grid-cols-2 mb-4 h-12 bg-slate-200 p-1">
                  <TabsTrigger value="shooting" className="gap-2 font-bold h-10"><Target className="w-4 h-4"/> ุงูุฑูุงูุฉ</TabsTrigger>
                  <TabsTrigger value="infantry" className="gap-2 font-bold h-10"><Footprints className="w-4 h-4"/> ุงููุดุงุฉ</TabsTrigger>
                </TabsList>

                {militaryData.map((branch) => (
                  <TabsContent key={branch.id} value={branch.id} className="space-y-6">
                    {branch.tests.map((test) => (
                      <div key={test.id} className="border-2 border-slate-200 rounded-xl overflow-hidden bg-white dark:bg-slate-950">
                        <div className="bg-slate-50 dark:bg-slate-900 p-3 flex justify-between items-center border-b">
                          <Input value={test.name} onChange={(e) => updateTestName(branch.id, test.id, e.target.value)} className="font-bold border-blue-200 w-1/2" />
                          <div className="flex items-center gap-2">
                            <Badge variant="secondary">ุฅุฌูุงูู: {test.criteria.reduce((acc, curr) => acc + (curr.max || 0), 0)} ุฏุฑุฌุฉ</Badge>
                            <Button variant="destructive" size="icon" onClick={() => deleteMilitaryTest(branch.id, test.id)} className="h-9 w-9"><Trash2 className="w-4 h-4" /></Button>
                          </div>
                        </div>
                        <div className="p-4 space-y-3">
                          {test.criteria.map((crit, idx) => (
                            <div key={crit.id} className="flex items-center gap-2">
                              <span className="text-xs text-slate-400 w-6 text-center">{idx + 1}.</span>
                              <Input value={crit.name} placeholder="ุงููุนูุงุฑ" onChange={(e) => updateCriterion(branch.id, test.id, crit.id, 'name', e.target.value)} className="h-8 text-xs bg-slate-50 flex-1" />
                              <Input type="number" value={crit.max} onChange={(e) => updateCriterion(branch.id, test.id, crit.id, 'max', e.target.value)} className="h-8 w-20 text-center font-bold text-blue-700 bg-slate-50" />
                              <Button variant="ghost" size="icon" onClick={() => deleteCriterion(branch.id, test.id, crit.id)} className="h-8 w-8 text-red-400"><X className="w-3 h-3" /></Button>
                            </div>
                          ))}
                          <Button variant="outline" size="sm" onClick={() => addCriterion(branch.id, test.id)} className="w-full mt-2 border-dashed h-8 text-xs"><Plus className="w-3 h-3 ml-1" /> ุฅุถุงูุฉ ูุนูุงุฑ</Button>
                        </div>
                      </div>
                    ))}
                    <Button onClick={() => addMilitaryTest(branch.id)} className="w-full h-12 border-2 border-dashed border-slate-300 bg-transparent text-slate-600 hover:border-blue-500 hover:text-blue-600"><Plus className="w-5 h-5 ml-2" /> ุฅุถุงูุฉ ุงุฎุชุจุงุฑ ุฌุฏูุฏ</Button>
                  </TabsContent>
                ))}
              </Tabs>
            </CardContent>
            <CardFooter className="bg-slate-50 p-4 flex justify-end border-t">
              <Button onClick={saveMilitaryConfigs} disabled={loading} className="bg-blue-600 hover:bg-blue-700 text-white gap-2 font-bold">
                {loading ? <Loader2 className="w-4 h-4 animate-spin" /> : <Save className="w-4 h-4" />} ุญูุธ ูุนุงููุฑ ุงูุนุณูุฑู
              </Button>
            </CardFooter>
          </Card>
        </TabsContent>

        {/* ๐ข ุชุงุจ ูุนุงููุฑ ุงูููุงูุฉ */}
        <TabsContent value="standards">
          <Card className="border-t-4 border-t-green-600 shadow-md">
            <CardHeader className="text-right">
              <CardTitle>ููุงุนุฏ ุงูุชูููู ุงูุฑูุงุถู</CardTitle>
              <CardDescription>ุงูุฅุนุฏุงุฏุงุช ุงูุฎุงุตุฉ ุจุงูููุงูุฉ ุงูุจุฏููุฉ (ุฌุฑูุ ุถุบุทุ ุจุทู).</CardDescription>
            </CardHeader>
            <CardContent className="space-y-6 text-right">
              <div className="space-y-2">
                <Label>ูุณุงูุฉ ุงูุฌุฑู ุงููุนุชูุฏุฉ</Label>
                <Select value={calcSettings.distance} onValueChange={(val) => setCalcSettings({ ...calcSettings, distance: val })} dir="ltr">
                  <SelectTrigger className="bg-slate-50 h-12 text-right flex-row-reverse"><SelectValue placeholder="ุงุฎุชุฑ ุงููุณุงูุฉ" /></SelectTrigger>
                  <SelectContent align="end">
                    <SelectItem value="3200">3200 ูุชุฑ</SelectItem>
                    <SelectItem value="2400">2400 ูุชุฑ</SelectItem>
                    <SelectItem value="1600">1600 ูุชุฑ</SelectItem>
                  </SelectContent>
                </Select>
              </div>
              <div className="grid grid-cols-2 gap-4">
                <div className="space-y-2">
                  <Label>ูุณุจุฉ ุงููุฌุงุญ (%)</Label>
                  <Input type="number" value={calcSettings.pass_rate} onChange={(e) => setCalcSettings({ ...calcSettings, pass_rate: Number(e.target.value) })} className="bg-slate-50 h-12 text-center font-bold" />
                </div>
                <div className="space-y-2">
                  <Label>ุงูุฏุฑุฌุฉ ุงููุตูู</Label>
                  <Input type="number" value={calcSettings.base_score} onChange={(e) => setCalcSettings({ ...calcSettings, base_score: Number(e.target.value) })} className="bg-slate-50 h-12 text-center font-bold" />
                </div>
              </div>
              <div className="flex items-center justify-between p-4 border rounded-lg bg-slate-50">
                <Label>ูุธุงู ุงูุฑุฃูุฉ (Mercy Mode)</Label>
                <Switch checked={calcSettings.mercy_mode} onCheckedChange={(val) => setCalcSettings({ ...calcSettings, mercy_mode: val })} />
              </div>
            </CardContent>
            <CardFooter className="bg-slate-50 p-4 flex justify-end">
              <Button onClick={saveSettings} disabled={loading} className="bg-green-700 hover:bg-green-800 text-white gap-2">
                {loading ? <Loader2 className="animate-spin" /> : <Save className="w-4 h-4" />} ุญูุธ ุงูุฑูุงุถู
              </Button>
            </CardFooter>
          </Card>
        </TabsContent>

       {/* ๐ ุชุงุจ ูุนุงููุฑ ุงูุงุดุชุจุงู - ูุณุฎุฉ ูุทูุฑุฉ */}
<TabsContent value="engagement">
  <Card className="border-t-4 border-t-orange-600 shadow-md">
    <CardHeader className="text-right pb-2">
      <CardTitle className="text-orange-700">ุฅุฏุงุฑุฉ ูุนุงููุฑ ุงูุงุดุชุจุงู</CardTitle>
      <CardDescription>ุชุนุฑูู ุงููุญุงูุฑุ ุงููุนุงููุฑุ ูุงููุญุทุงุช ุงูุชุนุฑูููุฉ.</CardDescription>
    </CardHeader>
    <CardContent className="space-y-6">
      <Tabs value={activeEngTab} onValueChange={setActiveEngTab} className="w-full">
        <TabsList className="w-full grid grid-cols-2 mb-4 h-12 bg-orange-50 p-1">
          <TabsTrigger value="technical" className="gap-2 font-bold h-10">ุงูุฌุงูุจ ุงูููู</TabsTrigger>
          <TabsTrigger value="scenario" className="gap-2 font-bold h-10">ุณููุงุฑูู </TabsTrigger>
        </TabsList>

        {engagementData.map((tab) => (
          <TabsContent key={tab.id} value={tab.id} className="space-y-6">
            {tab.axes.map((axis) => (
              <div key={axis.id} className="border-2 border-orange-100 rounded-xl overflow-hidden bg-white">
                {/* ุฑุฃุณ ุงููุญูุฑ */}
                <div className="bg-orange-50 p-3 flex flex-col md:flex-row justify-between items-start md:items-center gap-3 border-b border-orange-100">
  
  <div className="flex flex-col md:flex-row items-start md:items-center gap-2 flex-1 w-full">
    <span className="text-orange-600 font-black text-xs md:text-sm">ุงููุญูุฑ:</span>
    
    {/* ุงูุนุฑุถ ูู ุงูููุงุชู: ูุธูุฑ ูู Div ูุงุจู ููููุฑ */}
    <div 
      onClick={() => {
        setEditingAxis({ tabId: tab.id, axisId: axis.id, name: axis.name });
        setIsAxisModalOpen(true);
      }}
      className="md:hidden w-full p-2 bg-white border border-orange-200 rounded-lg text-sm font-bold text-slate-700 shadow-sm"
    >
      {axis.name || "ุงุถุบุท ูุชุณููุฉ ุงููุญูุฑ..."}
    </div>

    {/* ุงูุนุฑุถ ูู ุงูุดุงุดุงุช ุงููุจูุฑุฉ: ูุจูู ููุง ูู Input */}
    <Input 
      value={axis.name} 
      onChange={(e) => updateAxisName(tab.id, axis.id, e.target.value)} 
      className="hidden md:block font-bold border-orange-200 bg-white md:w-2/3 h-9" 
    />
    
    {/* ููุชุงุญ ุงูุชุดุบูู - ุชุฃูุฏ ูู ุจูุงุฆู ูู ุณุทุฑ ูููุตู ุฃู ุจุฌุงูุจ ุงูุนููุงู ูู ุงููุงุชู */}
    <div className="flex items-center gap-2 mr-auto ml-4 bg-white px-3 py-1 rounded-full border border-orange-200 shadow-sm" dir="rtl">
    
    <Switch 
      checked={axis.is_active ?? true} 
      onCheckedChange={(checked) => {
        setEngagementData(prev => prev.map(t => t.id === tab.id ? {
          ...t, axes: t.axes.map(a => a.id === axis.id ? { ...a, is_active: checked } : a)
        } : t));
      }} 
    />
    <Badge variant="outline" className={axis.is_active !== false ? "text-green-600 border-green-200" : "text-slate-400 border-slate-200"}>
      {axis.is_active !== false ? "ูุดุท" : "ูุนุทู"}
    </Badge>
</div>
  </div>

  <Button variant="ghost" size="icon" onClick={() => deleteEngAxis(tab.id, axis.id)} className="text-red-500 hover:bg-red-50 hidden md:flex">
    <Trash2 className="w-4 h-4" />
  </Button>
</div>

                {/* ูุงุฆูุฉ ุงููุนุงููุฑ ุฏุงุฎู ุงููุญูุฑ */}
                <div className="p-4 space-y-4">
                  {axis.criteria.map((crit, idx) => (
                    <div key={crit.id} className="grid grid-cols-1 md:grid-cols-12 gap-3 items-start pb-4 border-b last:border-0">
                      <div className="md:col-span-1 pt-2">
                        <Badge className="bg-slate-800 text-[10px]">{idx + 1}</Badge>
                      </div>
                      <div className="md:col-span-4 space-y-1">
                        <Label className="text-[10px] text-slate-400">ุงุณู ุงููุนูุงุฑ</Label>
                        <Input value={crit.name} placeholder="ุงููุนูุงุฑ" onChange={(e) => updateEngCriterion(tab.id, axis.id, crit.id, 'name', e.target.value)} className="h-9 text-xs" />
                      </div>
                      <div className="md:col-span-2 space-y-1">
                        <Label className="text-[10px] text-slate-400">ุงูุฏุฑุฌุฉ</Label>
                        <Input type="number" value={crit.max} onChange={(e) => updateEngCriterion(tab.id, axis.id, crit.id, 'max', e.target.value)} className="h-9 text-center font-bold text-orange-700" />
                      </div>
                      <div className="md:col-span-4 space-y-2">
  <Label className="text-[10px] text-slate-400">ุงููุญุทุงุช ุงูุชุนุฑูููุฉ</Label>
  <div className="flex flex-wrap gap-2 p-2 border rounded-lg bg-slate-50 min-h-[40px]">
    {crit.stations.map((station: string, sIdx: number) => (
      <div key={sIdx} className="flex items-center gap-1 bg-white border shadow-sm rounded-md px-2 py-1 group">
        <input 
          value={station}
          onChange={(e) => updateStationText(tab.id, axis.id, crit.id, sIdx, e.target.value)}
          placeholder="ุงุณู ุงููุญุทุฉ..."
          className="text-[11px] outline-none w-24 bg-transparent"
        />
        <button 
          onClick={() => deleteStation(tab.id, axis.id, crit.id, sIdx)}
          className="text-red-300 hover:text-red-500 transition-colors"
        >
          <X className="w-3 h-3" />
        </button>
      </div>
    ))}
    <Button 
      variant="outline" 
      size="sm" 
      onClick={() => addStationToCriterion(tab.id, axis.id, crit.id)}
      className="h-7 px-2 text-[10px] bg-white border-orange-200 text-orange-600 hover:bg-orange-50"
    >
      <Plus className="w-3 h-3 ml-1" /> ุฅุถุงูุฉ ูุญุทุฉ
    </Button>
  </div>
</div>
                      <div className="md:col-span-1 pt-6 text-left">
                        <Button 
  variant="ghost" 
  size="icon" 
  onClick={() => {
    const newCriteria = axis.criteria.filter(c => c.id !== crit.id);
    setEngagementData(prev => prev.map(t => t.id === tab.id ? { 
      ...t, 
      axes: t.axes.map(a => a.id === axis.id ? { ...a, criteria: newCriteria } : a) 
    } : t));
  }} 
  className="text-red-300 hover:text-red-500 h-8 w-8"
>
  <X className="w-3 h-3" />
</Button>
                      </div>
                    </div>
                  ))}
                  <Button variant="outline" size="sm" onClick={() => addEngCriterion(tab.id, axis.id)} className="w-full border-dashed text-orange-600 hover:bg-orange-50 border-orange-200">
                    <Plus className="w-3 h-3 ml-1" /> ุฅุถุงูุฉ ูุนูุงุฑ ูููุญูุฑ
                  </Button>
                </div>
              </div>
            ))}
            
            <Button onClick={() => addEngagementAxis(tab.id)} className="w-full h-14 border-2 border-dashed border-orange-200 bg-orange-50/50 text-orange-700 hover:bg-orange-100 hover:border-orange-400 transition-all">
              <Plus className="w-5 h-5 ml-2" /> ุฅูุดุงุก ูุญูุฑ ุชูููู ุฌุฏูุฏ
            </Button>
          </TabsContent>
        ))}
      </Tabs>
    </CardContent>
    {/* ๐๏ธ ุงูุจุญุซ ุนู ูุฐุง ุงูุฒุฑ ูู ุฃุณูู ุชุงุจ ุงูุงุดุชุจุงู ูุชุนุฏููู */}
<CardFooter className="bg-slate-50 p-4 flex justify-end border-t">
  <Button 
    onClick={saveEngagementConfigs} // ๐ ุฃุถู ูุฐุง ุงูุณุทุฑ ููุง
    disabled={loading}              // ๐ ูุฃุถู ูุฐุง ูุชุนุทูู ุงูุฒุฑ ุฃุซูุงุก ุงูุชุญููู
    className="bg-orange-600 hover:bg-orange-700 text-white gap-2 font-bold px-8"
  >
    {loading ? <Loader2 className="w-4 h-4 animate-spin" /> : <Save className="w-4 h-4" />} 
    ุญูุธ ูุนุงููุฑ ุงูุงุดุชุจุงู
  </Button>
</CardFooter>
  </Card>
</TabsContent>

<TabsContent value="disciplinary">
  <Card className="border-t-4 border-t-amber-700 shadow-md">
    <CardHeader className="text-right">
      <CardTitle className="text-amber-800 flex items-center gap-2">
        <ShieldCheck className="w-6 h-6" /> ุฅุฏุงุฑุฉ ููุงุฆุญ ุงููุฎุงููุงุช ูุงูุฌุฒุงุกุงุช
      </CardTitle>
      <CardDescription>ุชุนุฑูู ุงููุฎุงููุงุชุ ุงูุฌุฒุงุกุงุชุ ูุฏุฑุฌุงุช ุงูุฎุตู ููู ูุธุงู ุชุฏุฑูุจู.</CardDescription>
    </CardHeader>
    
    <CardContent className="space-y-6">
      <Tabs defaultValue="recruits" className="w-full" dir="rtl">
        {/* ุงูุชุจููุจุงุช ุงูุฑุฆูุณูุฉ */}
        <TabsList className="w-full grid grid-cols-2 mb-6 bg-slate-100 h-12 p-1 rounded-xl">
          <TabsTrigger value="recruits" className="font-bold text-sm md:text-base">ูุงุฆุญุฉ ุงููุณุชุฌุฏูู ูุงูุทูุจุฉ</TabsTrigger>
          <TabsTrigger value="specialized" className="font-bold text-sm md:text-base">ุงูุฏูุฑุงุช ุงูุญุชููุฉ ูุงูุชุฎุตุตูุฉ</TabsTrigger>
        </TabsList>

        {/* 1. ูุญุชูู ูุงุฆุญุฉ ุงููุณุชุฌุฏูู (ูุน ูุธุงู ุงููุฑุฒ ุงููุฑุนู) */}
        <TabsContent value="recruits" className="space-y-8">
          {/* ๐ ุฃุฒุฑุงุฑ ุงูุชุจุฏูู ุจูู ุงููุจูุช ูุงูุซุงุจุช ุตุจุญ */}
          <div className="flex justify-center mb-6">
            <div className="inline-flex p-1 bg-amber-50 border border-amber-200 rounded-2xl shadow-inner overflow-hidden">
              <Button 
                variant={recruitSystem === 'sleeping' ? 'default' : 'ghost'}
                onClick={() => setRecruitSystem('sleeping')}
                className={cn(
                  "rounded-xl px-6 md:px-10 font-black text-xs md:text-sm transition-all h-9 md:h-11",
                  recruitSystem === 'sleeping' ? "bg-amber-700 text-white shadow-lg" : "text-amber-800 hover:bg-amber-100"
                )}
              >
                ๐ ูุธุงู ุงููุจูุช
              </Button>
              <Button 
                variant={recruitSystem === 'fixed' ? 'default' : 'ghost'}
                onClick={() => setRecruitSystem('fixed')}
                className={cn(
                  "rounded-xl px-6 md:px-10 font-black text-xs md:text-sm transition-all h-9 md:h-11",
                  recruitSystem === 'fixed' ? "bg-amber-700 text-white shadow-lg" : "text-amber-800 hover:bg-amber-100"
                )}
              >
                โ๏ธ ูุธุงู ุซุงุจุช ุตุจุญ
              </Button>
            </div>
          </div>

          {/* ุนุฑุถ ุฌุฏุงูู ุงููุณุชุฌุฏูู ุจูุงุกู ุนูู ุงููุฑุฒ */}
          {disciplinaryData
            .filter(reg => reg.id === (recruitSystem === 'sleeping' ? 'recruits' : 'recruits_fixed'))
            .map((reg) => (
              <div key={reg.id} className="space-y-10 animate-in fade-in zoom-in-95 duration-500">
                {reg.degrees.map((degree) => (
                  <div key={degree.id} className="border-2 border-slate-200 rounded-2xl overflow-hidden shadow-sm bg-white dark:bg-slate-950">
                    <div className="bg-slate-800 text-white p-4 flex justify-between items-center">
                      <span className="font-bold flex items-center gap-2">
                        <Scale className="w-5 h-5 text-amber-400"/> {degree.name}
                      </span>
                      <Badge className="bg-amber-600 text-white border-0 px-3 py-1 text-xs">
                        {degree.items.length} ูุฎุงููุฉ ูุนุชูุฏุฉ
                      </Badge>
                    </div>
                    <div className="overflow-x-auto">
                      <table className="w-full text-sm text-right border-collapse">
                        <thead className="bg-slate-50 dark:bg-slate-900 border-b-2">
  <tr>
    {/* ุงููุฎุงููุฉ: 40% */}
    <th className="p-4 font-black w-[40%] border-l">ูุณูู ุงููุฎุงููุฉ</th>
    
    {/* ุงูุฌุฒุงุก: ุฒุฏูุงู ุฅูู 40% ููุธูุฑ ุฌููุฉ ูุฌูุฉ ุงูุชุญููู ูุงููุฉ */}
    <th className="p-4 font-black w-[40%] border-l text-center">ุงูุฌุฒุงุก (ุงูุนููุจุฉ)</th>
    
    {/* ุงูุฎุตู: ููุตูุงู ุฅูู 10% */}
    <th className="p-4 font-black w-[10%] text-center border-l">ุงูุฎุตู</th>
    
    {/* ุงูุญุฐู: 10% */}
    <th className="p-4 w-[10%]"></th>
  </tr>
</thead>
                        <tbody className="divide-y divide-slate-100">
                          {degree.items.map((item, i) => (
                            <tr key={item.id} className="hover:bg-amber-50/30 transition-colors">
                              <td className="p-2 border-l">
                                {/* ุนุฑุถ ููููุงุชู */}
                                <div 
                                  onClick={() => setEditingViolationText({ regId: reg.id, degId: degree.id, itemIdx: i, value: item.name })}
                                  className="md:hidden text-xs p-3 bg-slate-50 rounded-lg border border-dashed border-amber-200 min-h-[45px] cursor-pointer hover:bg-amber-50"
                                >
                                  {item.name || <span className="text-slate-400 italic">ุงุถุบุท ููุชุงุจุฉ ูุต ุงููุฎุงููุฉ...</span>}
                                </div>
                                {/* ุนุฑุถ ููููุจููุชุฑ */}
                                <Input 
                                  value={item.name} 
                                  onChange={(e) => {
                                    const newVal = toEnglishDigits(e.target.value);
                                    const newData = [...disciplinaryData];
                                    const r = newData.find(regis => regis.id === reg.id);
                                    const d = r?.degrees.find(deg => deg.id === degree.id);
                                    if(d) d.items[i].name = newVal;
                                    setDisciplinaryData(newData);
                                  }}
                                  placeholder="ุฃุฏุฎู ูุต ุงููุฎุงููุฉ ููุง..."
                                  className="hidden md:block border-none shadow-none focus-visible:ring-0 font-medium bg-transparent w-full text-slate-800" 
                                />
                              </td>
                              <td className="p-2 border-l">
                                <Input 
                                  value={item.penalty} 
                                  onChange={(e) => {
                                    const newVal = toEnglishDigits(e.target.value);
                                    const newData = [...disciplinaryData];
                                    const r = newData.find(regis => regis.id === reg.id);
                                    const d = r?.degrees.find(deg => deg.id === degree.id);
                                    if(d) d.items[i].penalty = newVal;
                                    setDisciplinaryData(newData);
                                  }}
                                  placeholder="ูุฏุฉ ุงูุญุฌุฒ..."
                                  className="border-none shadow-none focus-visible:ring-0 text-red-600 bg-transparent font-bold text-[10px] md:text-xs px-1 h-8 text-right"
                                />
                              </td>
                              <td className="p-2 border-l text-center">
                                <Input 
                                  type="number" 
                                  step="0.5"
                                  value={item.deduction} 
                                  onChange={(e) => {
                                    const val = toEnglishDigits(e.target.value);
                                    const newData = [...disciplinaryData];
                                    const r = newData.find(regis => regis.id === reg.id);
                                    const d = r?.degrees.find(deg => deg.id === degree.id);
                                    if(d) d.items[i].deduction = parseFloat(val) || 0;
                                    setDisciplinaryData(newData);
                                  }}
                                  className="w-14 mx-auto text-center font-black border-amber-200 bg-amber-50 dark:bg-amber-900/20 h-9 rounded-lg text-xs"
                                />
                              </td>
                              <td className="p-2 text-center">
                                <Button 
                                    variant="ghost" size="icon" 
                                    className="text-red-300 hover:text-red-600 hover:bg-red-50 rounded-full h-8 w-8"
                                    onClick={() => {
                                        const newData = [...disciplinaryData];
                                        const r = newData.find(regis => regis.id === reg.id);
                                        const d = r?.degrees.find(deg => deg.id === degree.id);
                                        if(d) d.items = d.items.filter(v => v.id !== item.id);
                                        setDisciplinaryData(newData);
                                    }}
                                >
                                  <Trash2 className="w-4 h-4" />
                                </Button>
                              </td>
                            </tr>
                          ))}
                        </tbody>
                      </table>
                      <Button 
                        variant="ghost" 
                        className="w-full rounded-none h-12 border-t border-dashed text-slate-500 hover:text-amber-800 hover:bg-amber-50/50 transition-all font-bold"
                        onClick={() => {
                            const newData = [...disciplinaryData];
                            const r = newData.find(regis => regis.id === reg.id);
                            const d = r?.degrees.find(deg => deg.id === degree.id);
                            if(d) d.items.push({ id: `v-${Date.now()}`, name: '', penalty: '', deduction: 0 });
                            setDisciplinaryData(newData);
                        }}
                      >
                        <Plus className="w-4 h-4 ml-2" /> ุฅุถุงูุฉ ุจูุฏ ุฌุฏูุฏ ููู {degree.name}
                      </Button>
                    </div>
                  </div>
                ))}
              </div>
            ))}
        </TabsContent>

        {/* 2. ูุญุชูู ุงูุฏูุฑุงุช ุงูุชุฎุตุตูุฉ (ููุง ูุงู) */}
        <TabsContent value="specialized" className="space-y-8 animate-in fade-in duration-500">
          {disciplinaryData
            .filter(reg => reg.id === 'specialized')
            .map((reg) => (
              <div key={reg.id} className="space-y-10">
                {reg.degrees.map((degree) => (
                  <div key={degree.id} className="border-2 border-slate-200 rounded-2xl overflow-hidden shadow-sm bg-white dark:bg-slate-950">
                    <div className="bg-slate-700 text-white p-4 flex justify-between items-center">
                      <span className="font-bold flex items-center gap-2">
                        <Scale className="w-5 h-5 text-amber-400"/> {degree.name}
                      </span>
                      <Badge className="bg-slate-500 text-white border-0 px-3 py-1 text-xs">
                        {degree.items.length} ูุฎุงููุฉ
                      </Badge>
                    </div>
                    {/* ... (ููุณ ูููู ุงูุฌุฏูู ุงูุนููู ููุชุฎุตุตูุฉ) ... */}
                    <div className="overflow-x-auto">
                      <table className="w-full text-sm text-right border-collapse">
                        <thead className="bg-slate-50 border-b-2">
                          <tr>
                            <th className="p-4 font-black w-1/2 border-l">ูุณูู ุงููุฎุงููุฉ</th>
                            <th className="p-4 font-black border-l">ุงูุฌุฒุงุก</th>
                            <th className="p-4 font-black text-center border-l">ุงูุฎุตู</th>
                            <th className="p-4 w-[60px]"></th>
                          </tr>
                        </thead>
                        <tbody className="divide-y divide-slate-100">
                          {degree.items.map((item, i) => (
                            <tr key={item.id} className="hover:bg-slate-50 transition-colors">
                              <td className="p-2 border-l">
                                <div 
                                  onClick={() => setEditingViolationText({ regId: reg.id, degId: degree.id, itemIdx: i, value: item.name })}
                                  className="md:hidden text-xs p-3 bg-slate-50 rounded-lg border border-dashed border-slate-200 min-h-[45px] cursor-pointer"
                                >
                                  {item.name || "ุงุถุบุท ูููุชุงุจุฉ..."}
                                </div>
                                <Input 
                                  value={item.name} 
                                  onChange={(e) => {
                                    const val = toEnglishDigits(e.target.value);
                                    const newData = [...disciplinaryData];
                                    const r = newData.find(regis => regis.id === reg.id);
                                    const d = r?.degrees.find(deg => deg.id === degree.id);
                                    if(d) d.items[i].name = val;
                                    setDisciplinaryData(newData);
                                  }}
                                  className="hidden md:block border-none shadow-none focus-visible:ring-0 font-medium bg-transparent w-full text-slate-800" 
                                />
                              </td>
                              <td className="p-2 border-l text-red-600 font-bold">
                                <Input 
                                  value={item.penalty} 
                                  onChange={(e) => {
                                    const val = toEnglishDigits(e.target.value);
                                    const newData = [...disciplinaryData];
                                    const r = newData.find(regis => regis.id === reg.id);
                                    const d = r?.degrees.find(deg => deg.id === degree.id);
                                    if(d) d.items[i].penalty = val;
                                    setDisciplinaryData(newData);
                                  }}
                                  className="border-none shadow-none focus-visible:ring-0 bg-transparent text-red-600 font-bold" 
                                />
                              </td>
                              <td className="p-2 border-l text-center">
                                <Input 
                                  type="number" step="0.5"
                                  value={item.deduction} 
                                  onChange={(e) => {
                                    const val = toEnglishDigits(e.target.value);
                                    const newData = [...disciplinaryData];
                                    const r = newData.find(regis => regis.id === reg.id);
                                    const d = r?.degrees.find(deg => deg.id === degree.id);
                                    if(d) d.items[i].deduction = parseFloat(val) || 0;
                                    setDisciplinaryData(newData);
                                  }}
                                  className="w-16 mx-auto text-center font-black border-slate-200 bg-slate-100 h-9 rounded-lg" 
                                />
                              </td>
                              <td className="p-2 text-center">
                                <Button 
                                    variant="ghost" size="icon" 
                                    className="text-slate-300 hover:text-red-600 h-8 w-8"
                                    onClick={() => {
                                        const newData = [...disciplinaryData];
                                        const r = newData.find(regis => regis.id === reg.id);
                                        const d = r?.degrees.find(deg => deg.id === degree.id);
                                        if(d) d.items = d.items.filter(v => v.id !== item.id);
                                        setDisciplinaryData(newData);
                                    }}
                                >
                                  <Trash2 className="w-4 h-4" />
                                </Button>
                              </td>
                            </tr>
                          ))}
                        </tbody>
                      </table>
                      <Button 
                        variant="ghost" 
                        className="w-full rounded-none h-12 border-t border-dashed text-slate-500 hover:text-slate-800 hover:bg-slate-100 transition-all font-bold"
                        onClick={() => {
                            const newData = [...disciplinaryData];
                            const r = newData.find(regis => regis.id === reg.id);
                            const d = r?.degrees.find(deg => deg.id === degree.id);
                            if(d) d.items.push({ id: `v-${Date.now()}`, name: '', penalty: '', deduction: 0 });
                            setDisciplinaryData(newData);
                        }}
                      >
                        <Plus className="w-4 h-4 ml-2" /> ุฅุถุงูุฉ ุจูุฏ ุฌุฏูุฏ
                      </Button>
                    </div>
                  </div>
                ))}
              </div>
            ))}
        </TabsContent>
      </Tabs>
    </CardContent>

    <CardFooter className="bg-slate-50 dark:bg-slate-900 border-t p-6 flex justify-end">
      <Button 
        onClick={saveDisciplinaryData} 
        disabled={loading} 
        className="bg-amber-700 hover:bg-amber-800 text-white gap-3 font-black px-12 py-6 text-lg rounded-xl shadow-xl transition-all active:scale-95"
      >
        {loading ? <Loader2 className="w-5 h-5 animate-spin" /> : <Save className="w-5 h-5" />}
        ุงุนุชูุงุฏ ูุญูุธ ูุงูุฉ ุงูููุงุฆุญ ุงููุนุฏูุฉ
      </Button>
    </CardFooter>
  </Card>
</TabsContent>
        {/* ๐จ ุชุงุจ ุงููุธูุฑ */}
        <TabsContent value="appearance">
          <Card className="shadow-md border-t-4 border-t-blue-600">
            <CardHeader className="text-right">
              <CardTitle>ุชุฎุตูุต ุงููุงุฌูุฉ</CardTitle>
              <CardDescription>ุชุญูู ูู ุฃููุงู ุงููุธุงู ูุทุฑููุฉ ุนุฑุถ ุงูุจูุงูุงุช.</CardDescription>
            </CardHeader>
            <CardContent className="space-y-6">
              <div className="flex items-center justify-between p-4 border rounded-lg bg-slate-50">
                <div className="flex items-center gap-4 text-right">
                  {isDark ? <Moon className="w-6 h-6 text-blue-500" /> : <Sun className="w-6 h-6 text-orange-500" />}
                  <div><Label>ุงููุถุน ุงููููู</Label></div>
                </div>
                <Switch checked={isDark} onCheckedChange={(checked) => setTheme(checked ? 'dark' : 'light')} />
              </div>
              <div className="space-y-2 text-right">
                <Label>ุนุฏุฏ ุงูุตููู ูู ุตูุญุฉ ุงููุชุงุฆุฌ</Label>
                <Select value={calcSettings.rows_per_page} onValueChange={(val) => setCalcSettings({...calcSettings, rows_per_page: val})} dir="ltr">
                  <SelectTrigger className="bg-slate-50 h-12 text-right flex-row-reverse"><SelectValue /></SelectTrigger>
                  <SelectContent align="end">
                    <SelectItem value="10">10 ุตููู</SelectItem>
                    <SelectItem value="20">20 ุตู</SelectItem>
                    <SelectItem value="50">50 ุตู</SelectItem>
                  </SelectContent>
                </Select>
              </div>
            </CardContent>
            <CardFooter className="bg-slate-50 p-4 flex justify-end">
              <Button onClick={saveSettings} className="bg-blue-700 text-white gap-2">ุญูุธ ุงูุชูุถููุงุช <Save className="w-4 h-4" /></Button>
            </CardFooter>
          </Card>
        </TabsContent>

        {/* โ๏ธ ุชุงุจ ุงูุชูููุน */}
        <TabsContent value="signature">
          <Card className="shadow-md border-t-4 border-t-purple-600">
            <CardHeader className="text-right"><CardTitle>ุงูุชูููุน ุงูุฑููู</CardTitle></CardHeader>
            <CardContent className="space-y-6">
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6 text-right">
                <div className="space-y-2">
                  <Label className="font-bold">ููุญุฉ ุงูุฑุณู:</Label>
                  <div className="border-2 border-dashed rounded-lg bg-white h-[200px]">
                    <SignatureCanvas 
    ref={sigPad} 
    penColor="black" 
    backgroundColor="white" // ๐ข ูุฐุง ูู ุงูุญู: ุฌุนู ุงูุฎูููุฉ ุจูุถุงุก ุจุฏูุงู ูู ุดูุงูุฉ
    canvasProps={{ className: 'w-full h-full' }} 
/>
                  </div>
                  <div className="flex gap-2 justify-end mt-2">
                    {savedSignature && <Button variant="destructive" onClick={deleteSignature} size="sm"><Trash2 className="w-4 h-4 ml-1" /> ุญุฐู</Button>}
                    <Button variant="outline" onClick={clearSignature} size="sm">ูุณุญ</Button>
                    <Button onClick={saveSignature} size="sm" className="bg-purple-700">ุญูุธ</Button>
                  </div>
                </div>
                <div className="space-y-2">
  <Label className="font-bold">ุงููุนุงููุฉ:</Label>
  <div className="h-[200px] border rounded-lg bg-slate-50 flex items-center justify-center overflow-hidden">
    {savedSignature ? (
      <img 
        // ุงูุฑุงุจุท ูุฎุฒู ูู State ูุน ุงูุชุงูู ุณุชุงูุจ
        src={savedSignature} 
        alt="Signature" 
        className="max-h-[150px] object-contain mix-blend-multiply" 
        
        // ๐ข ุงููุนุงูุฌุฉ ุงูุฐููุฉ: ุฅุฐุง ูู ูุฌุฏ PNG ูุญุงูู JPG
        onError={(e) => {
            const target = e.target as HTMLImageElement;
            // ูุชุฃูุฏ ุฃููุง ูู ููู ุจุงููุญุงููุฉ ูุณุจูุงู ูุชุฌูุจ ุงูุชูุฑุงุฑ
            if (target.src.includes('.png')) {
                // ุงุณุชุจุฏุงู ุงูุงูุชุฏุงุฏ ูุชุญุฏูุซ ุงูุชุงูู ุณุชุงูุจ ูุถูุงู ุงููุญุงููุฉ ุงูุฌุฏูุฏุฉ
                target.src = target.src.replace('.png', '.jpg');
            } else if (target.src.includes('.jpg') && !target.src.includes('.jpeg')) {
                 target.src = target.src.replace('.jpg', '.jpeg');
            } else {
                // ุฅุฐุง ูุดู ูู ุดูุกุ ูุฎูู ุงูุตูุฑุฉ ููุธูุฑ ุฑุณุงูุฉ
                target.style.display = 'none';
                setSavedSignature(null); // ุชุญุฏูุซ ุงูุญุงูุฉ ููุนุฑุถ "ูุง ููุฌุฏ"
            }
        }}
      />
    ) : (
      <p className="text-slate-400 font-bold opacity-50">ูุง ููุฌุฏ ุชูููุน ูุญููุธ</p>
    )}
  </div>
</div>
              </div>
            </CardContent>
          </Card>
        </TabsContent>

        {/* ๐ ุชุงุจ ุงูุฃูุงู */}
        <TabsContent value="security">
          <Card className="border-t-4 border-t-red-600 shadow-md text-right">
            <CardHeader><CardTitle className="text-red-600 flex items-center gap-2 justify-end"><Lock className="w-5 h-5" /> ุชุบููุฑ ูููุฉ ุงููุฑูุฑ</CardTitle></CardHeader>
            <CardContent className="space-y-4">
              <Input type="password" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ" value={currentPassword} onChange={(e) => setCurrentPassword(e.target.value)} className="text-right" />
              <Input type="password" placeholder="ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ" value={newPassword} onChange={(e) => setNewPassword(e.target.value)} className="text-right" />
              <Input type="password" placeholder="ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ" value={confirmPassword} onChange={(e) => setConfirmPassword(e.target.value)} className="text-right" />
              <Button onClick={handlePasswordChange} disabled={isUpdatingPassword} className="w-full bg-red-600 hover:bg-red-700">{isUpdatingPassword ? <Loader2 className="animate-spin" /> : "ุชุญุฏูุซ"}</Button>
            </CardContent>
          </Card>
        </TabsContent>
      <TabsContent value="training-schedule">
            <Card className="border-t-4 border-t-amber-500 shadow-md">
              {/* ... (Header ููุง ูู) ... */}
              <CardHeader className="flex flex-row items-center justify-between pb-2">
                <div>
                  <CardTitle className="text-amber-700 flex items-center gap-2"><CalendarDays className="w-5 h-5"/> ุฅุฏุงุฑุฉ ุงูุจุฑูุงูุฌ ุงููููู</CardTitle>
                  <CardDescription>ุชุนุฑูู ุงูุญุตุต ูุงูุชูููุชุงุช ููุฏูุฑุงุช ุงููุฎุชููุฉ (ุงูููุงูุจ ุงูุฃุณุจูุนูุฉ).</CardDescription>
                </div>
                <Button onClick={createNewTemplate} variant="outline" className="border-amber-200 text-amber-700 hover:bg-amber-50">
                  <Plus className="w-4 h-4 ml-2"/> ูุงูุจ ุฌุฏูุฏ
                </Button>
              </CardHeader>

              <CardContent className="space-y-6">
                {trainingTemplates.length === 0 ? (
                   // ... (ุฑุณุงูุฉ ูุง ููุฌุฏ ุจูุงูุงุช ููุง ูู) ...
                   <div className="text-center py-10 bg-slate-50 border-2 border-dashed rounded-xl text-slate-400">
                    <CalendarDays className="w-12 h-12 mx-auto mb-2 opacity-20"/>
                    <p>ูุง ุชูุฌุฏ ุฌุฏุงูู ุชุฏุฑูุจูุฉ ูุนุฑูุฉ.</p>
                    <Button onClick={createNewTemplate} variant="link" className="text-amber-600">ุงุถุบุท ูุฅูุดุงุก ุงูุฌุฏูู ุงูุฃูู</Button>
                  </div>
                ) : (
                  <Tabs value={activeTemplateId || ""} onValueChange={setActiveTemplateId} className="w-full">
                    {/* ... (TabsList ููุง ูู) ... */}
                    <TabsList className="w-full justify-start overflow-x-auto bg-slate-100 p-1 mb-4">
                      {trainingTemplates.map(temp => (
                        <TabsTrigger key={temp.id} value={temp.id} className="min-w-[120px]">
                          {temp.name || "ุจุฏูู ุนููุงู"}
                        </TabsTrigger>
                      ))}
                    </TabsList>

                    {trainingTemplates.map(template => (
                      <TabsContent key={template.id} value={template.id} className="space-y-4 animate-in fade-in slide-in-from-top-2"dir="rtl">
                        
                        {/* ๐ข ููุทูุฉ ุงูุฅุนุฏุงุฏุงุช ุงูุนูููุฉ (ุชู ุงูุชุญุฏูุซ ูุฅุถุงูุฉ ุงูุฏูุฑุฉ ูุงูุฏูุนุฉ) */}
                        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 bg-amber-50/50 p-4 rounded-xl border border-amber-100">
                          
                          {/* 1. ุงุณู ุงูุฌุฏูู */}
                          <div className="space-y-1 md:col-span-1">
                            <Label className="text-xs text-amber-800">ุงุณู ุงูุฌุฏูู (ูููุฑุฌุนูุฉ)</Label>
                            <Input 
                              value={template.name} 
                              onChange={(e) => setTrainingTemplates(prev => prev.map(t => t.id === template.id ? {...t, name: e.target.value} : t))}
                              className="bg-white border-amber-200 font-bold"
                            />
                          </div>

                          {/* 2. ุงุฎุชูุงุฑ ุงูุฏูุฑุฉ (ุดุฑุท ููุญูุธ) */}
                          <div className="space-y-1">
                            <Label className="text-xs text-amber-800 flex items-center gap-1">ุงูุฏูุฑุฉ <span className="text-red-500">*</span></Label>
                            <Select 
                                value={template.courseId} 
                                onValueChange={(val) => setTrainingTemplates(prev => prev.map(t => t.id === template.id ? {...t, courseId: val} : t))}
                            >
                                <SelectTrigger className="bg-white border-amber-200 h-10"><SelectValue placeholder="ุงุฎุชุฑ ุงูุฏูุฑุฉ" /></SelectTrigger>
                                <SelectContent>
                                    {filterOptions.courses.map((c: any) => <SelectItem key={c} value={c}>{c}</SelectItem>)}
                                </SelectContent>
                            </Select>
                          </div>

                          {/* 3. ุงุฎุชูุงุฑ ุงูุฏูุนุฉ (ุดุฑุท ููุญูุธ) */}
                          <div className="space-y-1">
                            <Label className="text-xs text-amber-800 flex items-center gap-1">ุงูุฏูุนุฉ <span className="text-red-500">*</span></Label>
                             <Select 
                                value={template.batchId} 
                                onValueChange={(val) => setTrainingTemplates(prev => prev.map(t => t.id === template.id ? {...t, batchId: val} : t))}
                            >
                                <SelectTrigger className="bg-white border-amber-200 h-10"><SelectValue placeholder="ุงุฎุชุฑ ุงูุฏูุนุฉ" /></SelectTrigger>
                                <SelectContent>
                                    {filterOptions.batches.map((b: any) => <SelectItem key={b} value={b}>{b}</SelectItem>)}
                                </SelectContent>
                            </Select>
                          </div>

                          {/* 4. ุฒุฑ ุงูุชูุนูู ูุงูุญุฐู */}
                          <div className="flex items-end gap-2">
                             <div className="flex items-center gap-2 bg-white px-2 py-2 rounded-lg border border-amber-200 w-full h-10">
                                <Switch 
                                  checked={template.isActive}
                                  onCheckedChange={(val) => setTrainingTemplates(prev => prev.map(t => t.id === template.id ? {...t, isActive: val} : t))}
                                />
                                <Label className="cursor-pointer text-[10px] whitespace-nowrap">ุชูุนูู ุงูุฌุฏูู</Label>
                             </div>
                             <Button 
  variant="destructive" 
  size="icon" 
  onClick={() => handleDeleteTemplate(template.id)} // ๐ ุงูุฑุจุท ููุง
  className="h-10 w-12 shrink-0"
>
  <Trash2 className="w-4 h-4"/>
</Button>
                          </div>
                        </div>

                        {/* ๐๏ธ ุฌุฏูู ุงูุญุตุต (ุดุจูุฉ) */}
                        <div className="border rounded-xl shadow-sm bg-white overflow-hidden">
                          {/* ุฌุนู ุงูุฌุฏูู ูุงุจู ููุชูุฑูุฑ ุฃูููุงู ููุชุนุงูู ูุน 11 ุญุตุฉ */}
                          <div className="overflow-x-auto">
                              <table className="w-full text-sm text-right min-w-[1000px]">
                                <thead className="bg-slate-800 text-white">
                                  <tr>
                                    <th className="p-3 w-[100px] border-b border-slate-700 sticky right-0 bg-slate-800 z-10">ุงูููู</th>
                                    
                                    {/* ุชูุฑุงุฑ ุงูุฃุนูุฏุฉ ุจูุงุกู ุนูู ุนุฏุฏ ุงูุญุตุต ุงูููุฌูุฏุฉ ูู ุฃูู ููู */}
                                    {template.schedule[0].sessions.map((_, i) => (
  <th key={i} className="p-3 min-w-[160px] border-b border-slate-700 text-center bg-slate-900/50 relative group/col">
    <div className="flex items-center justify-center gap-2">
      <span>ุงูุญุตุฉ {i + 1}</span>
      {/* ุฒุฑ ุงูุญุฐู ูุธูุฑ ุนูุฏ ุงูุญููู (Hover) ููู ุงูุฎููุฉ ููุท ูุฌูุงููุฉ ุงูุชุตููู */}
      <button 
        onClick={() => removeSessionColumn(template.id, i)}
        className="opacity-0 group-hover/col:opacity-100 text-red-400 hover:text-red-500 transition-opacity"
        title="ุญุฐู ูุฐุง ุงูุนููุฏ"
      >
        <Trash2 className="w-3.5 h-3.5" />
      </button>
    </div>
  </th>
))}

                                    {/* ๐ข ุฒุฑ ุฅุถุงูุฉ ุญุตุฉ (ุนููุฏ ุฌุฏูุฏ) */}
                                    <th className="p-2 border-b border-slate-700 bg-slate-800 w-[50px] text-center align-middle">
                                        <Button 
                                            variant="ghost" 
                                            size="sm" 
                                            onClick={() => addSessionColumn(template.id)}
                                            className="text-green-400 hover:text-green-300 hover:bg-slate-700"
                                            title="ุฅุถุงูุฉ ุญุตุฉ ุฌุฏูุฏุฉ"
                                        >
                                            <Plus className="w-5 h-5" />
                                        </Button>
                                    </th>
                                  </tr>
                                </thead>
                                <tbody className="bg-white divide-y">
                                  {template.schedule.map((daySchedule) => (
                                    <tr key={daySchedule.dayName} className="hover:bg-slate-50 transition-colors">
                                      <td className="p-3 font-bold bg-slate-50 border-l sticky right-0 text-center z-10 shadow-[2px_0_5px_-2px_rgba(0,0,0,0.1)] group/row">
  <div className="flex flex-col items-center gap-1">
    {daySchedule.dayName}
    <button 
      onClick={() => removeDayRow(template.id, daySchedule.dayName)}
      className="opacity-0 group-hover/row:opacity-100 text-red-500 hover:bg-red-50 p-1 rounded transition-all"
      title="ุญุฐู ูุฐุง ุงูููู"
    >
      <X className="w-3.5 h-3.5" />
    </button>
  </div>
</td>
                                      {daySchedule.sessions.map((sess, sessIdx) => (
                                        <td key={sess.id} className="p-2 border-l relative group">
                                          <div className="space-y-1">
                                             {/* ุงุฎุชูุงุฑ ููุน ุงูุญุตุฉ (ุชู ุงูุชุญุฏูุซ) */}
                                             <Select 
                                               value={sess.type} 
                                               onValueChange={(val: any) => updateSession(template.id, daySchedule.dayName, sessIdx, 'type', val)}
                                             >
                                               <SelectTrigger className="h-7 text-xs border-none bg-transparent hover:bg-slate-100 px-1 font-bold">
                                                  <SelectValue />
                                               </SelectTrigger>
                                               <SelectContent>
                                                  <SelectItem value="sports">๐ ููุงูุฉ ุจุฏููุฉ</SelectItem>
                                                  <SelectItem value="military">๐ช ุชุฏุฑูุจ ุนุณูุฑู</SelectItem>
                                                  <SelectItem value="combat">๐คผ ุงุดุชุจุงู ูุฏูุงุน</SelectItem> {/* ๐ข ุงูุฎูุงุฑ ุงูุฌุฏูุฏ */}
                                                  <SelectItem value="lecture">๐ ูุญุงุถุฑุฉ</SelectItem>
                                                  <SelectItem value="other">โช ุฃุฎุฑู</SelectItem>
                                               </SelectContent>
                                             </Select>

                                             {/* ุงุณู ุงูุญุตุฉ - ุชุญุฏูุซ ุงูุฃููุงู */}
                                             <Input 
                                               placeholder="ุงุณู ุงูุญุตุฉ..."
                                               value={sess.name}
                                               onChange={(e) => updateSession(template.id, daySchedule.dayName, sessIdx, 'name', e.target.value)}
                                               className={`h-8 text-[11px] font-bold text-center ${
                                                  sess.type === 'sports' ? 'bg-blue-50 text-blue-700 border-blue-200' :
                                                  sess.type === 'military' ? 'bg-green-50 text-green-700 border-green-200' :
                                                  sess.type === 'combat' ? 'bg-red-50 text-red-700 border-red-200' : // ููู ุงูุงุดุชุจุงู
                                                  'bg-slate-50'
                                               }`}
                                             />

                                             {/* ุงูุชูููุช */}
                                             <div className="flex items-center gap-1 justify-center opacity-60 group-hover:opacity-100 transition-opacity">
                                                <input type="time" value={sess.startTime} onChange={(e) => updateSession(template.id, daySchedule.dayName, sessIdx, 'startTime', e.target.value)} className="text-[10px] bg-transparent border-b w-10 text-center outline-none"/>
                                                <span className="text-[10px]">-</span>
                                                <input type="time" value={sess.endTime} onChange={(e) => updateSession(template.id, daySchedule.dayName, sessIdx, 'endTime', e.target.value)} className="text-[10px] bg-transparent border-b w-10 text-center outline-none"/>
                                             </div>
                                          </div>
                                        </td>
                                      ))}
                                      {/* ุฎููุฉ ูุงุฑุบุฉ ุชุญุช ุฒุฑ ุงูุฅุถุงูุฉ */}
                                      <td className="bg-slate-50 border-l"></td>
                                    </tr>
                                  ))}
                                </tbody>
                              </table>
                          </div>

                          {/* ๐ข ุฒุฑ ุฅุถุงูุฉ ููู ุฌุฏูุฏ ุฃุณูู ุงูุฌุฏูู */}
                          <div className="p-2 border-t bg-slate-50 text-center">
                              <Button 
                                variant="outline" 
                                size="sm" 
                                onClick={() => addDayRow(template.id)}
                                disabled={template.schedule.length >= 7} // ุชุนุทูู ุงูุฒุฑ ุฅุฐุง ุงูุชูู ุงูุฃุณุจูุน
                                className="border-dashed w-full text-slate-500 hover:text-slate-700"
                              >
                                <Plus className="w-4 h-4 ml-2" /> ุฅุถุงูุฉ ููู ุฅุถุงูู (ุงูุฌูุนุฉ / ุงูุณุจุช)
                              </Button>
                          </div>
                        </div>

                      </TabsContent>
                    ))}
                  </Tabs>
                )}
              </CardContent>
              <CardFooter className="bg-amber-50 p-4 flex justify-end border-t border-amber-100">
                <Button 
                  onClick={saveTrainingTemplates} 
                  disabled={loading} 
                  className="bg-amber-600 hover:bg-amber-700 text-white gap-2 font-bold px-8 shadow-lg transition-all hover:scale-105 active:scale-95"
                >
                   {loading ? (
                     <> <Loader2 className="w-4 h-4 animate-spin"/> ุฌุงุฑู ุงูุญูุธ... </>
                   ) : (
                     <> <Save className="w-4 h-4"/> ุงุนุชูุงุฏ ูุญูุธ ุงูุจุฑูุงูุฌ ุงูุชุฏุฑูุจู </>
                   )}
                </Button>
              </CardFooter>
            </Card>
          </TabsContent>
      </Tabs>
      <AlertDialog open={isDeleteDialogOpen} onOpenChange={setIsDeleteDialogOpen}>
  <AlertDialogContent dir="rtl" className="max-w-[400px] border-t-4 border-t-red-600">
    <AlertDialogHeader>
      <AlertDialogTitle className="flex items-center gap-2 text-red-600">
        <AlertTriangle className="w-5 h-5" />
        ุชุฃููุฏ ุงูุญุฐู ุงูููุงุฆู
      </AlertDialogTitle>
      <AlertDialogDescription className="text-right pt-2 text-slate-600 leading-relaxed">
        ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงูุงุฎุชุจุงุฑุ ุณูุคุฏู ูุฐุง ุงูุฅุฌุฑุงุก ุฅูู ูุณุญ ุงููุนุงููุฑ ุงูุฎุงุตุฉ ุจู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุงุฆูุงูุ ููู ุชุธูุฑ ูู ุตูุญุงุช ุฑุตุฏ ุงููุชุงุฆุฌ.
      </AlertDialogDescription>
    </AlertDialogHeader>
    <AlertDialogFooter className="flex-row-reverse gap-2 mt-4">
      <AlertDialogCancel className="flex-1">ุชุฑุงุฌุน</AlertDialogCancel>
      <AlertDialogAction 
        onClick={confirmPermanentDelete} 
        className="flex-1 bg-red-600 hover:bg-red-700 text-white font-bold"
      >
        {loading ? <Loader2 className="w-4 h-4 animate-spin" /> : "ูุนูุ ุงุญุฐู ููุงุฆูุงู"}
      </AlertDialogAction>
    </AlertDialogFooter>
  </AlertDialogContent>
</AlertDialog>
<Dialog open={isAxisModalOpen} onOpenChange={setIsAxisModalOpen}>
  <DialogContent className="max-w-xs md:hidden" dir="rtl">
    <DialogHeader>
      <DialogTitle className="text-sm font-bold border-b pb-2">ุชุนุฏูู ุงุณู ุงููุญูุฑ</DialogTitle>
    </DialogHeader>
    <div className="py-4">
      <Label className="text-xs mb-2 block">ุงุณู ุงููุญูุฑ ุงูุญุงูู:</Label>
      <Input 
        value={editingAxis?.name || ""} 
        onChange={(e) => {
          if (editingAxis) {
            setEditingAxis({ ...editingAxis, name: e.target.value });
            updateAxisName(editingAxis.tabId, editingAxis.axisId, e.target.value);
          }
        }}
        className="font-bold border-orange-300 focus:ring-orange-500"
      />
    </div>
    <Button onClick={() => setIsAxisModalOpen(false)} className="w-full bg-[#0f172a] text-[#c5b391]">
      ุชู ุงูุญูุธ
    </Button>
  </DialogContent>
</Dialog>
{/* ูุงูุฐุฉ ุชุนุฏูู ูุต ุงููุฎุงููุฉ - ุชุธูุฑ ุนูุฏ ุงูุถุบุท ุนูู ุงููุต ูู ุงููุงุชู */}
<Dialog open={!!editingViolationText} onOpenChange={() => setEditingViolationText(null)}>
  <DialogContent className="max-w-[90vw] md:max-w-lg rounded-xl" dir="rtl">
    <DialogHeader className="text-right border-b pb-3">
      <DialogTitle className="text-amber-800 flex items-center gap-2">
        <PenTool className="w-5 h-5" /> ุชุญุฑูุฑ ูุต ุงููุฎุงููุฉ
      </DialogTitle>
    </DialogHeader>
    <div className="py-6 space-y-4">
      <Label className="text-xs font-bold text-slate-500">ูุต ุงููุฎุงููุฉ ุงููุงูู:</Label>
      <textarea 
        value={editingViolationText?.value || ""}
        rows={8}
        onChange={(e) => {
          if (editingViolationText) {
            const val = toEnglishDigits(e.target.value);
            setEditingViolationText({ ...editingViolationText, value: val });
            const newData = [...disciplinaryData];
            const r = newData.find(regis => regis.id === editingViolationText.regId);
            const d = r?.degrees.find(deg => deg.id === editingViolationText.degId);
            if(d) d.items[editingViolationText.itemIdx].name = val;
            setDisciplinaryData(newData);
          }
        }}
        className="w-full p-4 text-sm bg-slate-50 border rounded-xl focus:ring-2 focus:ring-amber-500 outline-none resize-none leading-relaxed"
        placeholder="ุงูุชุจ ุชูุงุตูู ุงููุฎุงููุฉ ููุง..."
      />
    </div>
    <div className="flex gap-2">
      <Button onClick={() => setEditingViolationText(null)} className="flex-1 bg-amber-700 text-white font-bold">
        ุชู ุงูุญูุธ
      </Button>
    </div>
  </DialogContent>
</Dialog>
    </div>
    
  </ProtectedRoute>
  
  )
  
}